<!DOCTYPE html><html><head><meta charset="utf-8"><title>OpenEHR EHR REST API (v0.1 proposal)</title><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"><style>@import url('https://fonts.googleapis.com/css?family=Roboto:400,700|Inconsolata|Raleway:200');.hljs-comment,.hljs-title{color:#8e908c}.hljs-variable,.hljs-attribute,.hljs-tag,.hljs-regexp,.ruby .hljs-constant,.xml .hljs-tag .hljs-title,.xml .hljs-pi,.xml .hljs-doctype,.html .hljs-doctype,.css .hljs-id,.css .hljs-class,.css .hljs-pseudo{color:#c82829}.hljs-number,.hljs-preprocessor,.hljs-pragma,.hljs-built_in,.hljs-literal,.hljs-params,.hljs-constant{color:#f5871f}.ruby .hljs-class .hljs-title,.css .hljs-rules .hljs-attribute{color:#eab700}.hljs-string,.hljs-value,.hljs-inheritance,.hljs-header,.ruby .hljs-symbol,.xml .hljs-cdata{color:#718c00}.css .hljs-hexcolor{color:#3e999f}.hljs-function,.python .hljs-decorator,.python .hljs-title,.ruby .hljs-function .hljs-title,.ruby .hljs-title .hljs-keyword,.perl .hljs-sub,.javascript .hljs-title,.coffeescript .hljs-title{color:#4271ae}.hljs-keyword,.javascript .hljs-function{color:#8959a8}.hljs{display:block;background:white;color:#4d4d4c;padding:.5em}.coffeescript .javascript,.javascript .xml,.tex .hljs-formula,.xml .javascript,.xml .vbscript,.xml .css,.xml .hljs-cdata{opacity:.5}.right .hljs-comment{color:#969896}.right .css .hljs-class,.right .css .hljs-id,.right .css .hljs-pseudo,.right .hljs-attribute,.right .hljs-regexp,.right .hljs-tag,.right .hljs-variable,.right .html .hljs-doctype,.right .ruby .hljs-constant,.right .xml .hljs-doctype,.right .xml .hljs-pi,.right .xml .hljs-tag .hljs-title{color:#c66}.right .hljs-built_in,.right .hljs-constant,.right .hljs-literal,.right .hljs-number,.right .hljs-params,.right .hljs-pragma,.right .hljs-preprocessor{color:#de935f}.right .css .hljs-rule .hljs-attribute,.right .ruby .hljs-class .hljs-title{color:#f0c674}.right .hljs-header,.right .hljs-inheritance,.right .hljs-name,.right .hljs-string,.right .hljs-value,.right .ruby .hljs-symbol,.right .xml .hljs-cdata{color:#b5bd68}.right .css .hljs-hexcolor,.right .hljs-title{color:#8abeb7}.right .coffeescript .hljs-title,.right .hljs-function,.right .javascript .hljs-title,.right .perl .hljs-sub,.right .python .hljs-decorator,.right .python .hljs-title,.right .ruby .hljs-function .hljs-title,.right .ruby .hljs-title .hljs-keyword{color:#81a2be}.right .hljs-keyword,.right .javascript .hljs-function{color:#b294bb}.right .hljs{display:block;overflow-x:auto;background:#1d1f21;color:#c5c8c6;padding:.5em;-webkit-text-size-adjust:none}.right .coffeescript .javascript,.right .javascript .xml,.right .tex .hljs-formula,.right .xml .css,.right .xml .hljs-cdata,.right .xml .javascript,.right .xml .vbscript{opacity:.5}body{color:black;background:white;font:400 14px / 1.42 'Roboto',Helvetica,sans-serif}header{border-bottom:1px solid #f2f2f2;margin-bottom:12px}h1,h2,h3,h4,h5{color:black;margin:12px 0}h1 .permalink,h2 .permalink,h3 .permalink,h4 .permalink,h5 .permalink{margin-left:0;opacity:0;transition:opacity .25s ease}h1:hover .permalink,h2:hover .permalink,h3:hover .permalink,h4:hover .permalink,h5:hover .permalink{opacity:1}.triple h1 .permalink,.triple h2 .permalink,.triple h3 .permalink,.triple h4 .permalink,.triple h5 .permalink{opacity:.15}.triple h1:hover .permalink,.triple h2:hover .permalink,.triple h3:hover .permalink,.triple h4:hover .permalink,.triple h5:hover .permalink{opacity:.15}h1{font:200 36px 'Raleway',Helvetica,sans-serif;font-size:36px}h2{font:200 36px 'Raleway',Helvetica,sans-serif;font-size:30px}h3{font-size:100%;text-transform:uppercase}h5{font-size:100%;font-weight:normal}p{margin:0 0 10px}p.choices{line-height:1.6}a{color:#428bca;text-decoration:none}li p{margin:0}hr.split{border:0;height:1px;width:100%;padding-left:6px;margin:12px auto;background-image:linear-gradient(to right, rgba(0,0,0,0) 20%, rgba(0,0,0,0.2) 51.4%, rgba(255,255,255,0.2) 51.4%, rgba(255,255,255,0) 80%)}dl dt{float:left;width:130px;clear:left;text-align:right;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:700}dl dd{margin-left:150px}blockquote{color:rgba(0,0,0,0.5);font-size:15.5px;padding:10px 20px;margin:12px 0;border-left:5px solid #e8e8e8}blockquote p:last-child{margin-bottom:0}pre{background-color:#f5f5f5;padding:12px;border:1px solid #cfcfcf;border-radius:6px;overflow:auto}pre code{color:black;background-color:transparent;padding:0;border:none}code{color:#444;background-color:#f5f5f5;font:'Inconsolata',monospace;padding:1px 4px;border:1px solid #cfcfcf;border-radius:3px}ul,ol{padding-left:2em}table{border-collapse:collapse;border-spacing:0;margin-bottom:12px}table tr:nth-child(2n){background-color:#fafafa}table th,table td{padding:6px 12px;border:1px solid #e6e6e6}.text-muted{opacity:.5}.note,.warning{padding:.3em 1em;margin:1em 0;border-radius:2px;font-size:90%}.note h1,.warning h1,.note h2,.warning h2,.note h3,.warning h3,.note h4,.warning h4,.note h5,.warning h5,.note h6,.warning h6{font-family:200 36px 'Raleway',Helvetica,sans-serif;font-size:135%;font-weight:500}.note p,.warning p{margin:.5em 0}.note{color:black;background-color:#f0f6fb;border-left:4px solid #428bca}.note h1,.note h2,.note h3,.note h4,.note h5,.note h6{color:#428bca}.warning{color:black;background-color:#fbf1f0;border-left:4px solid #c9302c}.warning h1,.warning h2,.warning h3,.warning h4,.warning h5,.warning h6{color:#c9302c}header{margin-top:24px}nav{position:fixed;top:24px;bottom:0;overflow-y:auto}nav .resource-group{padding:0}nav .resource-group .heading{position:relative}nav .resource-group .heading .chevron{position:absolute;top:12px;right:12px;opacity:.5}nav .resource-group .heading a{display:block;color:black;opacity:.7;border-left:2px solid transparent;margin:0}nav .resource-group .heading a:hover{text-decoration:none;background-color:bad-color;border-left:2px solid black}nav ul{list-style-type:none;padding-left:0}nav ul a{display:block;font-size:13px;color:rgba(0,0,0,0.7);padding:8px 12px;border-top:1px solid #d9d9d9;border-left:2px solid transparent;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}nav ul a:hover{text-decoration:none;background-color:bad-color;border-left:2px solid black}nav ul>li{margin:0}nav ul>li:first-child{margin-top:-12px}nav ul>li:last-child{margin-bottom:-12px}nav ul ul a{padding-left:24px}nav ul ul li{margin:0}nav ul ul li:first-child{margin-top:0}nav ul ul li:last-child{margin-bottom:0}nav>div>div>ul>li:first-child>a{border-top:none}.preload *{transition:none !important}.pull-left{float:left}.pull-right{float:right}.badge{display:inline-block;float:right;min-width:10px;min-height:14px;padding:3px 7px;font-size:12px;color:#000;background-color:#f2f2f2;border-radius:10px;margin:-2px 0}.badge.get{color:#70bbe1;background-color:#d9edf7}.badge.head{color:#70bbe1;background-color:#d9edf7}.badge.options{color:#70bbe1;background-color:#d9edf7}.badge.put{color:#f0db70;background-color:#fcf8e3}.badge.patch{color:#f0db70;background-color:#fcf8e3}.badge.post{color:#93cd7c;background-color:#dff0d8}.badge.delete{color:#ce8383;background-color:#f2dede}.collapse-button{float:right}.collapse-button .close{display:none;color:#428bca;cursor:pointer}.collapse-button .open{color:#428bca;cursor:pointer}.collapse-button.show .close{display:inline}.collapse-button.show .open{display:none}.collapse-content{max-height:0;overflow:hidden;transition:max-height .3s ease-in-out}nav{width:220px}.container{max-width:940px;margin-left:auto;margin-right:auto}.container .row .content{margin-left:244px;width:696px}.container .row:after{content:'';display:block;clear:both}.container-fluid nav{width:22%}.container-fluid .row .content{margin-left:24%}.container-fluid.triple nav{width:16.5%;padding-right:1px}.container-fluid.triple .row .content{position:relative;margin-left:16.5%;padding-left:24px}.middle:before,.middle:after{content:'';display:table}.middle:after{clear:both}.middle{box-sizing:border-box;width:51.5%;padding-right:12px}.right{box-sizing:border-box;float:right;width:48.5%;padding-left:12px}.right a{color:#428bca}.right h1,.right h2,.right h3,.right h4,.right h5,.right p,.right div{color:white}.right pre{background-color:#1d1f21;border:1px solid #1d1f21}.right pre code{color:#c5c8c6}.right .description{margin-top:12px}.triple .resource-heading{font-size:125%}.definition{margin-top:12px;margin-bottom:12px}.definition .method{font-weight:bold}.definition .method.get{color:#2e8ab8}.definition .method.head{color:#2e8ab8}.definition .method.options{color:#2e8ab8}.definition .method.post{color:#56b82e}.definition .method.put{color:#b8a22e}.definition .method.patch{color:#b8a22e}.definition .method.delete{color:#b82e2e}.definition .uri{word-break:break-all;word-wrap:break-word}.definition .hostname{opacity:.5}.example-names{background-color:#eee;padding:12px;border-radius:6px}.example-names .tab-button{cursor:pointer;color:black;border:1px solid #ddd;padding:6px;margin-left:12px}.example-names .tab-button.active{background-color:#d5d5d5}.right .example-names{background-color:#444}.right .example-names .tab-button{color:white;border:1px solid #666;border-radius:6px}.right .example-names .tab-button.active{background-color:#5e5e5e}#nav-background{position:fixed;left:0;top:0;bottom:0;width:16.5%;padding-right:14.4px;background-color:#fbfbfb;border-right:1px solid #f0f0f0;z-index:-1}#right-panel-background{position:absolute;right:-12px;top:-12px;bottom:-12px;width:48.6%;background-color:#333;z-index:-1}@media (max-width:1200px){nav{width:198px}.container{max-width:840px}.container .row .content{margin-left:224px;width:606px}}@media (max-width:992px){nav{width:169.4px}.container{max-width:720px}.container .row .content{margin-left:194px;width:526px}}@media (max-width:768px){nav{display:none}.container{width:95%;max-width:none}.container .row .content,.container-fluid .row .content,.container-fluid.triple .row .content{margin-left:auto;margin-right:auto;width:95%}#nav-background{display:none}#right-panel-background{width:48.6%}}.back-to-top{position:fixed;z-index:1;bottom:0;right:24px;padding:4px 8px;color:rgba(0,0,0,0.5);background-color:#f2f2f2;text-decoration:none !important;border-top:1px solid #d9d9d9;border-left:1px solid #d9d9d9;border-right:1px solid #d9d9d9;border-top-left-radius:3px;border-top-right-radius:3px}.resource-group{padding:12px;margin-bottom:12px;background-color:white;border:1px solid #d9d9d9;border-radius:6px}.resource-group h2.group-heading,.resource-group .heading a{padding:12px;margin:-12px -12px 12px -12px;background-color:#f2f2f2;border-bottom:1px solid #d9d9d9;border-top-left-radius:6px;border-top-right-radius:6px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.triple .content .resource-group{padding:0;border:none}.triple .content .resource-group h2.group-heading,.triple .content .resource-group .heading a{margin:0 0 12px 0;border:1px solid #d9d9d9}nav .resource-group .heading a{padding:12px;margin-bottom:0}nav .resource-group .collapse-content{padding:0}.action{margin-bottom:12px;padding:12px 12px 0 12px;overflow:hidden;border:1px solid transparent;border-radius:6px}.action h4.action-heading{padding:6px 12px;margin:-12px -12px 12px -12px;border-bottom:1px solid transparent;border-top-left-radius:6px;border-top-right-radius:6px;overflow:hidden}.action h4.action-heading .name{float:right;font-weight:normal;padding:6px 0}.action h4.action-heading .method{padding:6px 12px;margin-right:12px;border-radius:3px;display:inline-block}.action h4.action-heading .method.get{color:#fff;background-color:#337ab7}.action h4.action-heading .method.head{color:#fff;background-color:#337ab7}.action h4.action-heading .method.options{color:#fff;background-color:#337ab7}.action h4.action-heading .method.put{color:#fff;background-color:#ed9c28}.action h4.action-heading .method.patch{color:#fff;background-color:#ed9c28}.action h4.action-heading .method.post{color:#fff;background-color:#5cb85c}.action h4.action-heading .method.delete{color:#fff;background-color:#d9534f}.action h4.action-heading code{color:#444;background-color:#f5f5f5;border-color:#cfcfcf;font-weight:normal;word-break:break-all;display:inline-block;margin-top:2px}.action dl.inner{padding-bottom:2px}.action .title{border-bottom:1px solid white;margin:0 -12px -1px -12px;padding:12px}.action.get{border-color:#bce8f1}.action.get h4.action-heading{color:#337ab7;background:#d9edf7;border-bottom-color:#bce8f1}.action.head{border-color:#bce8f1}.action.head h4.action-heading{color:#337ab7;background:#d9edf7;border-bottom-color:#bce8f1}.action.options{border-color:#bce8f1}.action.options h4.action-heading{color:#337ab7;background:#d9edf7;border-bottom-color:#bce8f1}.action.post{border-color:#d6e9c6}.action.post h4.action-heading{color:#5cb85c;background:#dff0d8;border-bottom-color:#d6e9c6}.action.put{border-color:#faebcc}.action.put h4.action-heading{color:#ed9c28;background:#fcf8e3;border-bottom-color:#faebcc}.action.patch{border-color:#faebcc}.action.patch h4.action-heading{color:#ed9c28;background:#fcf8e3;border-bottom-color:#faebcc}.action.delete{border-color:#ebccd1}.action.delete h4.action-heading{color:#d9534f;background:#f2dede;border-bottom-color:#ebccd1}</style></head><body class="preload"><a href="#top" class="text-muted back-to-top"><i class="fa fa-toggle-up"></i>&nbsp;Back to top</a><div class="container"><div class="row"><nav><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#top">Overview</a></div><div class="collapse-content"><ul><li><a href="#header-considerations">Considerations</a></li><li><a href="#header-about-">About </a></li><li><a href="#header-glossary">Glossary</a></li><li><a href="#header-data-representation">Data representation</a></li><li><a href="#header-json-format">JSON Format</a></li><li><a href="#header-datetime-format">Datetime format</a></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#ehr">EHR</a></div><div class="collapse-content"><ul><li><a href="#ehr-ehr">EHR</a><ul><li><a href="#ehr-ehr-post"><span class="badge post"><i class="fa fa-plus"></i></span>Create a new EHR</a></li><li><a href="#ehr-ehr-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Create a new EHR with ehrId</a></li><li><a href="#ehr-ehr-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get EHR</a></li><li><a href="#ehr-ehr-delete"><span class="badge delete"><i class="fa fa-times"></i></span>Delete EHR</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#ehr_status">EHR_STATUS</a></div><div class="collapse-content"><ul><li><a href="#ehr_status-ehr_status">EHR_STATUS</a><ul><li><a href="#ehr_status-ehr_status-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get EHR_STATUS</a></li><li><a href="#ehr_status-ehr_status-get-1"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get EHR_STATUS by versionUid</a></li><li><a href="#ehr_status-ehr_status-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Update EHR_STATUS</a></li></ul></li><li><a href="#ehr_status-versioned_ehr_status">VERSIONED_EHR_STATUS</a><ul><li><a href="#ehr_status-versioned_ehr_status-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get VERSIONED_EHR_STATUS</a></li><li><a href="#ehr_status-versioned_ehr_status-get-1"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get EHR_STATUS version</a></li><li><a href="#ehr_status-versioned_ehr_status-get-2"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get EHR_STATUS version by uid</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#ehr_access">EHR_ACCESS</a></div><div class="collapse-content"><ul><li><a href="#ehr_access-ehr_access">EHR_ACCESS</a><ul><li><a href="#ehr_access-ehr_access-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get EHR_ACCESS by versionUid</a></li><li><a href="#ehr_access-ehr_access-get-1"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get EHR_ACCESS</a></li><li><a href="#ehr_access-ehr_access-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Update an EHR_ACCESS</a></li></ul></li><li><a href="#ehr_access-versioned_ehr_access">VERSIONED_EHR_ACCESS</a><ul><li><a href="#ehr_access-versioned_ehr_access-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get a VERSIONED_EHR_ACCESS</a></li><li><a href="#ehr_access-versioned_ehr_access-get-1"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get an EHR_ACCESS version by versionUid</a></li><li><a href="#ehr_access-versioned_ehr_access-get-2"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get an EHR_ACCESS version</a></li><li><a href="#ehr_access-versioned_ehr_access-post"><span class="badge post"><i class="fa fa-plus"></i></span>Create a new EHR_ACCESS version</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#directory">DIRECTORY</a></div><div class="collapse-content"><ul><li><a href="#directory-directory">Directory</a><ul><li><a href="#directory-directory-post"><span class="badge post"><i class="fa fa-plus"></i></span>Create a directory</a></li><li><a href="#directory-directory-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Update a directory</a></li><li><a href="#directory-directory-delete"><span class="badge delete"><i class="fa fa-times"></i></span>Delete a directory</a></li><li><a href="#directory-directory-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get a directory or its sub-folder by versionUid</a></li><li><a href="#directory-directory-get-1"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get a directory or its sub-folder</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#composition">COMPOSITION</a></div><div class="collapse-content"><ul><li><a href="#composition-composition">Composition</a><ul><li><a href="#composition-composition-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get a composition by version uid</a></li><li><a href="#composition-composition-get-1"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get a composition</a></li><li><a href="#composition-composition-post"><span class="badge post"><i class="fa fa-plus"></i></span>Create a new composition</a></li><li><a href="#composition-composition-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Update or create a composition</a></li><li><a href="#composition-composition-delete"><span class="badge delete"><i class="fa fa-times"></i></span>Delete a composition</a></li><li><a href="#composition-composition-put-1"><span class="badge put"><i class="fa fa-pencil"></i></span>Update a composition directly</a></li><li><a href="#composition-composition-delete-1"><span class="badge delete"><i class="fa fa-times"></i></span>Delete a composition directly</a></li><li><a href="#composition-composition-get-2"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get a composition by version uid directly</a></li><li><a href="#composition-composition-get-3"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get a composition directly</a></li></ul></li><li><a href="#composition-versioned-composition">Versioned Composition</a><ul><li><a href="#composition-versioned-composition-post"><span class="badge post"><i class="fa fa-plus"></i></span>Create a new versioned composition</a></li><li><a href="#composition-versioned-composition-put"><span class="badge put"><i class="fa fa-pencil"></i></span>Create a new versioned composition with supplied uid</a></li><li><a href="#composition-versioned-composition-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get a versioned composition</a></li><li><a href="#composition-versioned-composition-post-1"><span class="badge post"><i class="fa fa-plus"></i></span>Create a new composition version</a></li><li><a href="#composition-versioned-composition-get-1"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get a composition version by versionUid</a></li><li><a href="#composition-versioned-composition-get-2"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get a composition version</a></li></ul></li></ul></div></div><div class="resource-group"><div class="heading"><div class="chevron"><i class="open fa fa-angle-down"></i></div><a href="#query">QUERY</a></div><div class="collapse-content"><ul><li><a href="#query-querying">Querying</a><ul><li><a href="#query-querying-get"><span class="badge get"><i class="fa fa-arrow-down"></i></span>Get AQL query results</a></li><li><a href="#query-querying-post"><span class="badge post"><i class="fa fa-plus"></i></span>Get query results</a></li></ul></li></ul></div></div><p style="text-align: center; word-wrap: break-word;"><a href="http://www.openehr.org/api">http://www.openehr.org/api</a></p></nav><div class="content"><header><h1 id="top">OpenEHR EHR REST API (v0.1 proposal)</h1></header><p><strong>The following is a proposal for an OpenEHR EHR REST API. It is not complete and might still change completely
before the final release.</strong></p>
<p>The following specifications are not intended to describe an existing API but rather an abstract blueprint
to which each openEHR implementation should adhere to.</p>
<p>The openEHR EHR REST API enables interaction with an openEHR service in a RESTful manner.</p>
<h2 id="header-considerations">Considerations <a class="permalink" href="#header-considerations" aria-hidden="true">¶</a></h2>
<h3 id="header-about-">About <code>versionSelector</code> <a class="permalink" href="#header-about-" aria-hidden="true">¶</a></h3>
<p>In many places parameter <code>versionSelector</code> is used to select a specific version (or associated data object)
of a VERSIONED_OBJECT and can have the following values:</p>
<ul>
<li>
<p>fixed string: <code>LATEST_TRUNK_VERSION</code></p>
</li>
<li>
<p>a specific timestamp in the ISO8601 format (e.g. 2015-01-20T19:30:22.765+01:00)</p>
</li>
<li>
<p>a <code>versionUid</code> (VERSION unique identifier)</p>
</li>
<li>
<p>a <code>uid</code> (VERSIONED_OBJECT unique identifier)</p>
</li>
</ul>
<p>When the <code>versionSelector</code> parameter is not provided, the latest trunk version is returned,
which is the same as specifying <code>versionSelector=LATEST_TRUNK_VERSION</code>.</p>
<h2 id="header-glossary">Glossary <a class="permalink" href="#header-glossary" aria-hidden="true">¶</a></h2>
<p>Throughout these specifications a set of short terms is being used as described below:</p>
<table>
<thead>
<tr>
<th>Term</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ehrId</code></td>
<td>The string value for an EHR identifier, stored under EHR.ehr_id.value, usually an UUID or GUID</td>
</tr>
<tr>
<td><code>uid</code></td>
<td>The string value of a VERSIONED_OBJECT unique identifier, stored under VERSIONED_OBJECT.uid.value, e.g. 8849182c-82ad-4088-a07f-48ead4180515</td>
</tr>
<tr>
<td><code>versionUid</code></td>
<td>The string value of a VERSION unique identifier, stored under VERSION.uid.value, e.g. 8849182c-82ad-4088-a07f-48ead4180515::example.domain.com::1</td>
</tr>
<tr>
<td><code>versionSelector</code></td>
<td>The string value of a VERSION unique identifier, a specific timestamp or the string <code>LATEST_TRUNK_VERSION</code></td>
</tr>
</tbody>
</table>
<h2 id="header-data-representation">Data representation <a class="permalink" href="#header-data-representation" aria-hidden="true">¶</a></h2>
<h3 id="header-json-format">JSON Format <a class="permalink" href="#header-json-format" aria-hidden="true">¶</a></h3>
<ul>
<li>
<p>attribute names will be lowercase snake-case names as specified in the RM spec. For example:</p>
<ul>
<li>context : {“start_time”: “2016-01-01T00:00Z”}</li>
</ul>
</li>
<li>
<p>metadata attributes (those that are not also RM attributes) will always be prefixed by a ‘_’</p>
</li>
<li>
<p>we will use a <code>_type</code> attribute to specify RM type which will be upper-case class name from the RM spec:
{
“_type”: “DV_TEXT”,
“value”: “Hello world!”
}</p>
</li>
<li>
<p>null RM attributes will be absent when serialized as JSON</p>
</li>
</ul>
<h3 id="header-datetime-format">Datetime format <a class="permalink" href="#header-datetime-format" aria-hidden="true">¶</a></h3>
<p>It is recommended to always use canonical ISO8601 expanded format, e.g. 2016-06-23T13:42:16.117+02:00, but any other valid ISO8601 datetime is accepted.</p>
<p>Any datetime value provided by a create or update action will be preserved as it was sent (i.e. if composition was saved as narrow format, it will always return the way it was).</p>
<section id="ehr" class="resource-group"><h2 class="group-heading">EHR <a href="#ehr" class="permalink">&para;</a></h2><div id="ehr-ehr" class="resource"><h3 class="resource-heading">EHR <a href="#ehr-ehr" class="permalink">&nbsp;&para;</a></h3><p>Management of EHR resources.</p>
<div id="ehr-ehr-post" class="action post"><h4 class="action-heading"><div class="name">Create a new EHR</div><a href="#ehr-ehr-post" class="method post">POST</a><code class="uri">/ehr</code></h4><p>Create a new <code>EHR</code> with an auto-generated identifier.
Request body may contain <code>ehr_status</code> and <code>ehr_access</code> attributes. When provided these
resources will also be created as part of the <code>create EHR</code> action,
otherwise default resources will be created automatically by the service.</p>
<h4>Example URI</h4><div class="definition"><span class="method post">POST</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr</span></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation|minimal}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"commit_audit"</span>: {
        <span class="hljs-string">"description"</span>: <span class="hljs-string">"Commit audit description"</span>,
        <span class="hljs-string">"committer"</span>: {<span class="hljs-string">"_type"</span>: <span class="hljs-string">"PARTY_IDENTIFIED"</span>, ... }
    },
    <span class="hljs-string">"ehr_status"</span>: {                                <span class="hljs-comment">/* not included attributes that are mandatory in the IM are set by the server, e.g. ehr_status.owner_id will be set when an uid is set for the EHR being created */</span>
      <span class="hljs-string">"_type"</span>: <span class="hljs-string">"VERSIONED_EHR_STATUS"</span>,
      <span class="hljs-string">"uid"</span>: <span class="hljs-string">"_a_valid_uid_"</span>,                      <span class="hljs-comment">/* UUID or OID, UUID preferred */</span>
      <span class="hljs-string">"time_created"</span>: <span class="hljs-string">"YYYYMMDDThhmmss,SSS(Z|[+-]hhmm)"</span>, <span class="hljs-comment">/* ISO8601 e.g. 20170801T010646,000+0000 or 20170801T010646,000Z */</span>
    }
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>201 Created</code> is returned when a new EHR has been successfully created.
The EHR resource is returned in the body when the <code>Prefer</code> header has the value of <code>return=representation</code>.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">/ehr/{ehrId}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"system_id"</span>: {...},
    <span class="hljs-string">"ehr_id"</span>: {...},
    <span class="hljs-string">"ehr_status"</span>: <span class="hljs-string">"versioned ehr status uid"</span>,
    <span class="hljs-string">"ehr_access"</span>: <span class="hljs-string">"versioned ehr access uid"</span>,
    <span class="hljs-string">"directory"</span>: {},
    <span class="hljs-string">"time_created"</span>, <span class="hljs-string">"..."</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>‘400 Bad Request’ is returned when unable to create a new EHR due to bad client Request, e.g. malformed syntax.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>401 Unauthorized</code> is returned when request is not authorised to be performed.</p>
</div></div></div></div><div id="ehr-ehr-put" class="action put"><h4 class="action-heading"><div class="name">Create a new EHR with ehrId</div><a href="#ehr-ehr-put" class="method put">PUT</a><code class="uri">/ehr/{ehrId}</code></h4><p>Create new <code>EHR</code> with the specified EHR identifier.
The request body may contain <code>ehr_status</code> and <code>ehr_access</code> attributes,
which will be used to create these initial resources associated with the new EHR.
When the <code>ehr_status</code> or <code>ehr_access</code> attributes are not provided, defaults resources
will be created by the service.</p>
<h4>Example URI</h4><div class="definition"><span class="method put">PUT</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation|minimal}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"commit_audit"</span>: {
        <span class="hljs-string">"description"</span>: <span class="hljs-string">"Commit audit description"</span>,
        <span class="hljs-string">"committer"</span>: {<span class="hljs-string">"_type"</span>: <span class="hljs-string">"PARTY_IDENTIFIED"</span>, ... }
    },
    <span class="hljs-string">"ehr_status"</span>: {...},
    <span class="hljs-string">"ehr_access"</span>: {...}
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>201 Created</code> is returned when a new EHR has been successfully created.
The new EHR resource is returned in the body when the request’s <code>Prefer</code> header value is <code>return=representation</code>.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">/ehr/{ehrId}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"system_id"</span>: {},
    <span class="hljs-string">"ehr_id"</span>: {},
    <span class="hljs-string">"ehr_status"</span>: <span class="hljs-string">"versioned ehr status uid"</span>,
    <span class="hljs-string">"ehr_access"</span>: <span class="hljs-string">"versioned ehr access uid"</span>,
    <span class="hljs-string">"directory"</span>: {},
    <span class="hljs-string">"time_created"</span>, <span class="hljs-string">"..."</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>‘400 Bad Request’ is returned when unable to create a new EHR due to bad client Request, e.g. malformed syntax such as the ‘ehrId’ not a valid HIER_OBJECT_ID value.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>409</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unable to create a new EHR due to a conflict with the current state of the resource. Can happen when the supplied ehrId already exists. // PP: ambiguous with 405 description.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>401 Unauthorized</code> is returned when request is not authorised to be performed.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>405</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>405 Method Not Allowed</code> is returned when an <code>EHR</code> with specified <code>ehrId</code> already exists.</p>
</div></div></div></div><div id="ehr-ehr-get" class="action get"><h4 class="action-heading"><div class="name">Get EHR</div><a href="#ehr-ehr-get" class="method get">GET</a><code class="uri">/ehr/{ehrId}</code></h4><p>Retrieve the EHR with the specified <code>ehrId</code>.</p>
<h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>200 OK</code> is returned when the EHR resource is successfully retrieved.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"system_id"</span>: {},
    <span class="hljs-string">"ehr_id"</span>: {},
    <span class="hljs-string">"ehr_status"</span>: <span class="hljs-string">"versioned ehr status uid"</span>,
    <span class="hljs-string">"ehr_access"</span>: <span class="hljs-string">"versioned ehr access uid"</span>,
    <span class="hljs-string">"directory"</span>: {},
    <span class="hljs-string">"time_created"</span>, <span class="hljs-string">"..."</span>,
    ... <span class="hljs-comment">// to be defined, possibly counts of compositions, contributions, etc.</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>400 Bad Request</code> is returned when the request has invalid content such as an invalid <code>ehrId</code> value. // PP: what is an invalid ehdId? are we validating format? not empty? it is better to make it opaque, if it comes and there is no EHR with that id, return 404.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>401 Unauthorized</code> is returned when request is not authorised.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>404 Not Found</code> is returned when an <code>EHR</code> with <code>ehrId</code> does not exist.</p>
</div></div></div></div><div id="ehr-ehr-delete" class="action delete"><h4 class="action-heading"><div class="name">Delete EHR</div><a href="#ehr-ehr-delete" class="method delete">DELETE</a><code class="uri">/ehr/{ehrId}</code></h4><p><em>This call is under discussion.</em> // PP: do not allow DELETE, use PUT to update EHR_ACCESS to not queryable and/or not modifiable.</p>
<p>Mark the <code>EHR</code> as deleted by updating the associated <code>EHR_STATUS</code> and <code>EHR_ACCESS</code> as deleted.
The request body contains commit_audit attribute to be used as the commit audit details
for the deleted <code>EHR_STATUS</code> and <code>EHR_ACCESS</code> resources. Where an implementation requires
additional attestation to authorise the deletion, this can be provided in the attestations
attribute in the request.</p>
<p>Note: Some jurisdictions may require the service to physically delete the <code>EHR</code> and all its content. // PP: since this is a delicate operation, it might be performed by an EHR management system, IMO it is not needed at the API level (for now).</p>
<p>This operation may be used to implement this capability but the commit_audit and attestations must be
retained using an alternative audit trail than the usual contribution audit details.</p>
<h4>Example URI</h4><div class="definition"><span class="method delete">DELETE</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Body</h5><pre><code>{
    <span class="hljs-string">"commit_audit"</span>: {
        <span class="hljs-string">"description"</span>: <span class="hljs-string">"Commit audit description"</span>,
        <span class="hljs-string">"committer"</span>: { <span class="hljs-string">"_type"</span>: <span class="hljs-string">"PARTY_IDENTIFIED"</span>, 
            ... }
    },
    <span class="hljs-string">"attestations"</span>: { ... }
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>204</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>204 No Content</code> is return when <code>EHR</code> is successfully deleted.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>400 Bad Request</code> is returned when the request has invalid content such as an invalid <code>ehrId</code> value.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>401 Unauthorized</code> is returned when request is not authorised.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>404 Not Found</code> is returned when an <code>EHR</code> with <code>ehrId</code> does not exist.</p>
</div></div></div></div></div></section><section id="ehr_status" class="resource-group"><h2 class="group-heading">EHR_STATUS <a href="#ehr_status" class="permalink">&para;</a></h2><div id="ehr_status-ehr_status" class="resource"><h3 class="resource-heading">EHR_STATUS <a href="#ehr_status-ehr_status" class="permalink">&nbsp;&para;</a></h3><p>Management of EHR_STATUS resources.</p>
<div id="ehr_status-ehr_status-get" class="action get"><h4 class="action-heading"><div class="name">Get EHR_STATUS</div><a href="#ehr_status-ehr_status-get" class="method get">GET</a><code class="uri">/ehr/{ehrId}/ehr_status{?versionSelector}</code></h4><p>Retrieve the <code>EHR_STATUS</code> associated with the EHR specified by <code>ehrId</code>.
When the <code>versionSelector</code> parameter is provided, the <code>EHR_STATUS</code> version that existed at the specified version time is returned,
otherwise the latest trunk version is returned.
The <code>versionSelector</code> parameter may be an ISO8601 datetime string or symbolic value such as <code>LATEST_TRUNK_VERSION</code>.</p>
<h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/ehr_status?<span class="hljs-attribute">versionSelector=</span><span class="hljs-literal"></span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier</p>
</dd><dt>versionSelector</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>version time specifier</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>200 OK</code> is return with the EHR_STATUS resource in the body when it is successfully retrieved.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/ehr_status/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  <span class="hljs-string">"_type"</span>: <span class="hljs-string">"EHR_STATUS"</span>,
  <span class="hljs-string">"uid"</span>: <span class="hljs-string">"..."</span>,                                <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"archetype_node_id"</span>: <span class="hljs-string">""</span>,                     <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"name"</span>: <span class="hljs-string">""</span>,                                  <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"archetype_details"</span>: {                       <span class="hljs-comment">/* LOCATABLE */</span>
    <span class="hljs-string">"archetype_id"</span>: <span class="hljs-string">"..."</span>,
    <span class="hljs-string">"rm_version"</span>: <span class="hljs-string">"1.0.3"</span>,
  },
  <span class="hljs-string">"subject"</span>: {
    <span class="hljs-string">"external_ref"</span>: {
      <span class="hljs-string">"namespace"</span>: <span class="hljs-string">"DEMOGRAPHIC"</span>,
      <span class="hljs-string">"type"</span>: <span class="hljs-string">"PERSON"</span>,
      <span class="hljs-string">"id"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"HIER_OBJECT_ID"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"_valid_root_uid_::_extension_"</span> <span class="hljs-comment">/* root can be UUID or OID, UUID preferred '::_extension_' is optional */</span>
      }
    }
  }
  <span class="hljs-string">"is_queryable"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"is_modifiable"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"other_details"</span>: {                           <span class="hljs-comment">/* optional, ITEM_STRUCTURE, archetypable */</span>
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"ITEM_TREE"</span>,
    <span class="hljs-string">"items"</span>: {
      ...
    }
  }
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>400 Bad Request</code> is returned when the request has invalid content such as an invalid <code>ehrId</code> or <code>versionUid</code> format.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>401 Unauthorized</code> is returned when request is not authorised.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>404 Not Found</code> returned when <code>EHR</code> with <code>ehrId</code> does not exist or has been deleted or
a version of an <code>EHR_STATUS</code> resource does not exist at the specified <code>versionSelector</code>.</p>
</div></div></div></div><div id="ehr_status-ehr_status-get-1" class="action get"><h4 class="action-heading"><div class="name">Get EHR_STATUS by versionUid</div><a href="#ehr_status-ehr_status-get-1" class="method get">GET</a><code class="uri">/ehr/{ehrId}/ehr_status/{versionUid}</code></h4><p>Retrieve the version of the <code>EHR_STATUS</code> associated with the specified <code>ehrId</code> and <code>versionUid</code>. // PP: this operation is included in the previous one, just use versionSelector=versionUid. IMO this should be removed.</p>
<h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/ehr_status/<span class="hljs-attribute" title="versionUid">versionUid</span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier</p>
</dd><dt>versionUid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>version UID</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>200 OK</code> is return when the <code>EHR_STATUS</code> is successfully retrieved.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  <span class="hljs-string">"_type"</span>: <span class="hljs-string">"EHR_STATUS"</span>,
  <span class="hljs-string">"uid"</span>: <span class="hljs-string">"..."</span>,                                <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"archetype_node_id"</span>: <span class="hljs-string">""</span>,                     <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"name"</span>: <span class="hljs-string">""</span>,                                  <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"archetype_details"</span>: {                       <span class="hljs-comment">/* LOCATABLE */</span>
    <span class="hljs-string">"archetype_id"</span>: <span class="hljs-string">"..."</span>,
    <span class="hljs-string">"rm_version"</span>: <span class="hljs-string">"1.0.3"</span>,
  },
  <span class="hljs-string">"subject"</span>: {
    <span class="hljs-string">"external_ref"</span>: {
      <span class="hljs-string">"namespace"</span>: <span class="hljs-string">"DEMOGRAPHIC"</span>,
      <span class="hljs-string">"type"</span>: <span class="hljs-string">"PERSON"</span>,
      <span class="hljs-string">"id"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"HIER_OBJECT_ID"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"_valid_root_uid_::_extension_"</span> <span class="hljs-comment">/* root can be UUID or OID, UUID preferred '::_extension_' is optional */</span>
      }
    }
  }
  <span class="hljs-string">"is_queryable"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"is_modifiable"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"other_details"</span>: {                           <span class="hljs-comment">/* optional, ITEM_STRUCTURE, archetypable */</span>
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"ITEM_TREE"</span>,
    <span class="hljs-string">"items"</span>: {
      ...
    }
  }
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>400 Bad Request</code> is returned when the request has invalid parameters such as an invalid ehrId value.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>401 Unauthorized</code> is returned when request is not authorised.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>404 Not Found</code> is returned when an <code>EHR</code> with <code>ehrId</code> does not exist or
an <code>EHR_STATUS</code> with <code>versionUid</code> does not exist.</p>
</div></div></div></div><div id="ehr_status-ehr_status-put" class="action put"><h4 class="action-heading"><div class="name">Update EHR_STATUS</div><a href="#ehr_status-ehr_status-put" class="method put">PUT</a><code class="uri">/ehr/{ehrId}/ehr_status</code></h4><p>Update <code>EHR_STATUS</code> associated with the specified <code>ehrId</code>.
The existing <code>versionUid</code> of <code>EHR_STATUS</code> resource must be specified in the <code>Match-If</code> header.
The response will contain the updated <code>EHR_STATUS</code> resource when the <code>Prefer</code> header has a value of <code>return=representation</code></p>
<h4>Example URI</h4><div class="definition"><span class="method put">PUT</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/ehr_status</span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Match-If</span>: <span class="hljs-string">{precedingVersionUid}</span><br><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation|minimal}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  <span class="hljs-string">"_type"</span>: <span class="hljs-string">"EHR_STATUS"</span>,
  <span class="hljs-string">"uid"</span>: <span class="hljs-string">"..."</span>,                                  <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"archetype_node_id"</span>: <span class="hljs-string">""</span>,                       <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"name"</span>: <span class="hljs-string">""</span>,                                    <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"archetype_details"</span>: {                         <span class="hljs-comment">/* LOCATABLE */</span>
    <span class="hljs-string">"archetype_id"</span>: <span class="hljs-string">"..."</span>,
    <span class="hljs-string">"rm_version"</span>: <span class="hljs-string">"1.0.3"</span>,
  },
  <span class="hljs-string">"subject"</span>: {
    <span class="hljs-string">"external_ref"</span>: {
      <span class="hljs-string">"namespace"</span>: <span class="hljs-string">"DEMOGRAPHIC"</span>,
      <span class="hljs-string">"type"</span>: <span class="hljs-string">"PERSON"</span>,
      <span class="hljs-string">"id"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"HIER_OBJECT_ID"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"_valid_root_uid_::_extension_"</span> <span class="hljs-comment">/* root can be UUID or OID, UUID preferred '::_extension_' is optional */</span>
      }
    }
  }
  <span class="hljs-string">"is_queryable"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"is_modifiable"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"other_details"</span>: {                             <span class="hljs-comment">/* optional, ITEM_STRUCTURE, archetypable */</span>
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"ITEM_TREE"</span>,
    <span class="hljs-string">"items"</span>: {
      ...
    }
  }
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>200 OK</code> return when <code>EHR_STATUS</code> resource is successfully updated.
The updated <code>EHR_STATUS</code> resource is returned in the body when <code>prefer</code> header value is <code>return=representation</code>.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/ehr_status/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  <span class="hljs-string">"_type"</span>: <span class="hljs-string">"EHR_STATUS"</span>,
  <span class="hljs-string">"uid"</span>: <span class="hljs-string">"..."</span>,                                  <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"archetype_node_id"</span>: <span class="hljs-string">""</span>,                       <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"name"</span>: <span class="hljs-string">""</span>,                                    <span class="hljs-comment">/* LOCATABLE */</span>
  <span class="hljs-string">"archetype_details"</span>: {                         <span class="hljs-comment">/* LOCATABLE */</span>
    <span class="hljs-string">"archetype_id"</span>: <span class="hljs-string">"..."</span>,
    <span class="hljs-string">"rm_version"</span>: <span class="hljs-string">"1.0.3"</span>,
  },
  <span class="hljs-string">"subject"</span>: {
    <span class="hljs-string">"external_ref"</span>: {
      <span class="hljs-string">"namespace"</span>: <span class="hljs-string">"DEMOGRAPHIC"</span>,
      <span class="hljs-string">"type"</span>: <span class="hljs-string">"PERSON"</span>,
      <span class="hljs-string">"id"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"HIER_OBJECT_ID"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"_valid_root_uid_::_extension_"</span> <span class="hljs-comment">/* root can be UUID or OID, UUID preferred '::_extension_' is optional */</span>
      }
    }
  }
  <span class="hljs-string">"is_queryable"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"is_modifiable"</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">"other_details"</span>: {                             <span class="hljs-comment">/* optional, ITEM_STRUCTURE, archetypable */</span>
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"ITEM_TREE"</span>,
    <span class="hljs-string">"items"</span>: {
      ...
    }
  }
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>204</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>204 No Content</code> is returned when <code>Prefer</code> header is NOT set to <code>return=representation</code>.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/ehr_status/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>400 Bad Request</code> is returned when the request has invalid content such as an invalid <code>ehrId</code> format.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>401 Unauthorized</code> is returned when request is not authorised.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>404 Not Found</code> is returned when EHR with ehrId does not exist or has been deleted or
a version of an <code>EHR_STATUS</code> resource does not exist at the specified <code>versionSelector</code>.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>412</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>412 Conflict</code> is return when <code>Match-If</code> header doesn’t match the latest trunk version.
Returns latest trunk version in the <code>Content-Location</code> and <code>ETag</code> headers.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/ehr_status/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div></div></div></div></div><div id="ehr_status-versioned_ehr_status" class="resource"><h3 class="resource-heading">VERSIONED_EHR_STATUS <a href="#ehr_status-versioned_ehr_status" class="permalink">&nbsp;&para;</a></h3><p>Management of <code>VERSIONED_EHR_STATUS</code> resources.</p>
<div id="ehr_status-versioned_ehr_status-get" class="action get"><h4 class="action-heading"><div class="name">Get VERSIONED_EHR_STATUS</div><a href="#ehr_status-versioned_ehr_status-get" class="method get">GET</a><code class="uri">/ehr/{ehrId}/versioned_ehr_status</code></h4><p>Retrieve <code>VERSIONED_EHR_STATUS</code> associated with an EHR specified by <code>ehrId</code> including its <code>revision_history</code>.</p>
<h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/versioned_ehr_status</span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>200 OK</code> is return when the requested EHR’s <code>VERSIONED_EHR_STATUS</code> is successfully retrieved, which is provided in the body.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
   <span class="hljs-string">"_type"</span>: <span class="hljs-string">"VERSIONED_EHR_STATUS"</span>,
   <span class="hljs-string">"uid"</span>: <span class="hljs-string">"_a_valid_uid_"</span>,                     <span class="hljs-comment">/* UUID or OID, UUID preferred */</span>
   <span class="hljs-string">"owner_id"</span>: <span class="hljs-string">"{ehrId}"</span>,
   <span class="hljs-string">"time_created"</span>: <span class="hljs-string">"DV_DATE_TIME"</span>,             <span class="hljs-comment">/* ISO8601 YYYYMMDDThhmmss,SSS(Z|[+-]hhmm) e.g. 20170801T010646,000+0000 or 20170801T010646,000Z */</span>
   <span class="hljs-string">"revision_history"</span>: {
     <span class="hljs-string">"items"</span>: [
       {
         <span class="hljs-string">"version_id"</span>: <span class="hljs-string">"OBJECT_VERSION_ID"</span>,    <span class="hljs-comment">/* object_id::creating_system_id::version_tree_id */</span>
         <span class="hljs-string">"audits"</span>: [
           {
             <span class="hljs-string">"system_id"</span>: <span class="hljs-string">"String"</span>,
             <span class="hljs-string">"time_committed"</span>: <span class="hljs-string">"DV_DATE_TIME"</span>,
             <span class="hljs-string">"change_type"</span>: {
               <span class="hljs-string">"value"</span>: <span class="hljs-string">"String"</span>,              <span class="hljs-comment">/* value from openehr terminoogy, change_type http://openehr.org/releases/1.0.2/architecture/terminology.pdf */</span>
               <span class="hljs-string">"defining_code"</span>: {
                 <span class="hljs-string">"terminology_id"</span>: {
                   <span class="hljs-string">"value"</span>: <span class="hljs-string">"openehr"</span>
                 },
                 <span class="hljs-string">"code_stirng"</span>: <span class="hljs-string">"String"</span>
               }
             },
             <span class="hljs-string">"desription"</span>: {
               <span class="hljs-string">"value"</span>: <span class="hljs-string">"String"</span>
             }
           },
           {...},
           {...}
         ]
       },
       {...},
       {...}
     ]
   }
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>400 Bad Request</code> is returned when the request is invalid such as an invalid <code>ehrId</code> value.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>401 Unauthorized</code> is returned when request is not authorised.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>404 Not Found</code> is returned when an <code>EHR</code> with <code>ehrId</code> does not exist.</p>
</div></div></div></div><div id="ehr_status-versioned_ehr_status-get-1" class="action get"><h4 class="action-heading"><div class="name">Get EHR_STATUS version</div><a href="#ehr_status-versioned_ehr_status-get-1" class="method get">GET</a><code class="uri">/ehr/{ehrId}/versioned_ehr_status/version?{versionSelector}</code></h4><p>Retrieve the <code>VERSION</code> of an <code>EHR_STATUS</code> associated with the specified <code>ehrId</code> and selected by <code>versionSelector</code>.
When the <code>versionSelector</code> parameter is provided, the <code>VERSION</code> that existed at the specified version time is returned,
otherwise the latest trunk version is returned.
The <code>versionSelector</code> parameter may be an ISO8601 datetime string or symbolic value such as <code>LATEST_TRUNK_VERSION</code>.</p>
<h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/versioned_ehr_status/version?<span class="hljs-attribute" title="versionSelector">versionSelector</span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier</p>
</dd><dt>versionSelector</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>version time specifier</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>200 OK</code> is return when the requested <code>VERSION</code> is successfully retrieved, which is provided in the body.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/versioned_ehr_status/version/{versionUid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  <span class="hljs-string">"_type"</span>: <span class="hljs-string">"ORIGINAL_VERSION"</span>,                 <span class="hljs-comment">/* Use IMPORTED_VERSION if this is a copy from another server */</span>
  <span class="hljs-string">"uid"</span>: <span class="hljs-string">"OBJECT_VERSION_ID"</span>,                  <span class="hljs-comment">/* _ehr_status_uid_::_system_id_::1 _system_id_ is the ID of the system from which the EHR was created */</span>
  <span class="hljs-string">"contribution"</span>: {                            <span class="hljs-comment">/* does not include reference to other versions, even that is mandatory in the IM */</span>
    <span class="hljs-string">"uid"</span>: <span class="hljs-string">"HIER_OBJECT_ID"</span>,
    <span class="hljs-string">"audit"</span>: {
      <span class="hljs-string">"system_id"</span>: <span class="hljs-string">"String"</span>,
      <span class="hljs-string">"time_committed"</span>: <span class="hljs-string">"DV_DATE_TIME"</span>,
      <span class="hljs-string">"description"</span>: <span class="hljs-string">"String"</span>                  <span class="hljs-comment">/* optional */</span>
    }
  },
  <span class="hljs-string">"signature"</span>: <span class="hljs-string">"String"</span>,                       <span class="hljs-comment">/* optional */</span>
  <span class="hljs-string">"data"</span>: {
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"EHR_STATUS"</span>,
    <span class="hljs-string">"subject"</span>: {
      <span class="hljs-string">"external_ref"</span>: {
        <span class="hljs-string">"namespace"</span>: <span class="hljs-string">"DEMOGRAPHIC"</span>,
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"PERSON"</span>,
        <span class="hljs-string">"id"</span>: {
          <span class="hljs-string">"_type"</span>: <span class="hljs-string">"HIER_OBJECT_ID"</span>,
          <span class="hljs-string">"value"</span>: <span class="hljs-string">"_valid_root_uid_::_extension_"</span> <span class="hljs-comment">/* root can be UUID or OID, UUID preferred '::_extension_' is optional */</span>
        }
      }
    }
    <span class="hljs-string">"is_queryable"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"is_modifiable"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"other_details"</span>: {                         <span class="hljs-comment">/* optional, ITEM_STRUCTURE, archetypable */</span>
      <span class="hljs-string">"_type"</span>: <span class="hljs-string">"ITEM_TREE"</span>,
      <span class="hljs-string">"items"</span>: {
        ...
      }
    }
  },
  <span class="hljs-string">"commit_audit"</span>: {                            <span class="hljs-comment">/* the time committed attribute is set by the server */</span>
    <span class="hljs-string">"system_id"</span>: <span class="hljs-string">"_a_string_id_"</span>,              <span class="hljs-comment">/* same as the container version.uid.system_id */</span>
    <span class="hljs-string">"change_type"</span>: {
      <span class="hljs-string">"value"</span>: <span class="hljs-string">"creation"</span>,
      <span class="hljs-string">"terminology_id"</span>: {
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"openehr"</span>
      },
      <span class="hljs-string">"code_string"</span>: <span class="hljs-string">"249"</span>
    },
    <span class="hljs-string">"description"</span>: <span class="hljs-string">"optional description"</span>
  },
  <span class="hljs-string">"attestations"</span>: [
    {
      <span class="hljs-string">"system_id"</span>: <span class="hljs-string">"String"</span>,
      <span class="hljs-string">"time_committed"</span>: <span class="hljs-string">"DV_DATE_TIME"</span>,
      <span class="hljs-string">"description"</span>: <span class="hljs-string">"String"</span>                  <span class="hljs-comment">/* optional */</span>
      <span class="hljs-string">"reason"</span>: <span class="hljs-string">"DV_TEXT"</span>,
      <span class="hljs-string">"proof"</span>: <span class="hljs-string">"String"</span>,                       <span class="hljs-comment">/* optional */</span>
      <span class="hljs-string">"is_pending"</span>: <span class="hljs-string">"Boolean"</span>
    },
    {...},
    {...}
  ]
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>400 Bad Request</code> is returned when the request is invalid such as an invalid <code>ehrId</code> or <code>versionSelector</code> value.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>401 Unauthorized</code> is returned when request is not authorised.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>404 Not Found</code> is returned when <code>EHR</code> with <code>ehrId</code> does not exist, deleted
or when <code>EHR_STATUS</code> does not exist at the specified <code>versionSelector</code>.</p>
</div></div></div></div><div id="ehr_status-versioned_ehr_status-get-2" class="action get"><h4 class="action-heading"><div class="name">Get EHR_STATUS version by uid</div><a href="#ehr_status-versioned_ehr_status-get-2" class="method get">GET</a><code class="uri">/ehr/{ehrId}/versioned_ehr_status/version/{versionUid}</code></h4><p>Retrieve <code>VERSION</code> of an <code>EHR_STATUS</code> associated with the specified <code>ehrId</code> and <code>versionUid</code>.</p>
<h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/versioned_ehr_status/version/<span class="hljs-attribute" title="versionUid">versionUid</span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier</p>
</dd><dt>versionUid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>version uid</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>200 OK</code> is return when the requested <code>VERSION</code> is successfully retrieved.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  <span class="hljs-string">"_type"</span>: <span class="hljs-string">"ORIGINAL_VERSION"</span>,                 <span class="hljs-comment">/* Use IMPORTED_VERSION if this is a copy from another server */</span>
  <span class="hljs-string">"uid"</span>: <span class="hljs-string">"OBJECT_VERSION_ID"</span>,                  <span class="hljs-comment">/* _ehr_status_uid_::_system_id_::1 _system_id_ is the ID of the system from which the EHR was created */</span>
  <span class="hljs-string">"contribution"</span>: {                            <span class="hljs-comment">/* does not include reference to other versions, even that is mandatory in the IM */</span>
    <span class="hljs-string">"uid"</span>: <span class="hljs-string">"HIER_OBJECT_ID"</span>,
    <span class="hljs-string">"audit"</span>: {
      <span class="hljs-string">"system_id"</span>: <span class="hljs-string">"String"</span>,
      <span class="hljs-string">"time_committed"</span>: <span class="hljs-string">"DV_DATE_TIME"</span>,
      <span class="hljs-string">"description"</span>: <span class="hljs-string">"String"</span>                  <span class="hljs-comment">/* optional */</span>
    }
  },
  <span class="hljs-string">"signature"</span>: <span class="hljs-string">"String"</span>,                       <span class="hljs-comment">/* optional */</span>
  <span class="hljs-string">"data"</span>: {
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"EHR_STATUS"</span>,
    <span class="hljs-string">"subject"</span>: {
      <span class="hljs-string">"external_ref"</span>: {
        <span class="hljs-string">"namespace"</span>: <span class="hljs-string">"DEMOGRAPHIC"</span>,
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"PERSON"</span>,
        <span class="hljs-string">"id"</span>: {
          <span class="hljs-string">"_type"</span>: <span class="hljs-string">"HIER_OBJECT_ID"</span>,
          <span class="hljs-string">"value"</span>: <span class="hljs-string">"_valid_root_uid_::_extension_"</span> <span class="hljs-comment">/* root can be UUID or OID, UUID preferred '::_extension_' is optional */</span>
        }
      }
    }
    <span class="hljs-string">"is_queryable"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"is_modifiable"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-string">"other_details"</span>: {                         <span class="hljs-comment">/* optional, ITEM_STRUCTURE, archetypable */</span>
      <span class="hljs-string">"_type"</span>: <span class="hljs-string">"ITEM_TREE"</span>,
      <span class="hljs-string">"items"</span>: {
        ...
      }
    }
  },
  <span class="hljs-string">"commit_audit"</span>: {                            <span class="hljs-comment">/* the time committed attribute is set by the server */</span>
    <span class="hljs-string">"system_id"</span>: <span class="hljs-string">"_a_string_id_"</span>,              <span class="hljs-comment">/* same as the container version.uid.system_id */</span>
    <span class="hljs-string">"change_type"</span>: {
      <span class="hljs-string">"value"</span>: <span class="hljs-string">"creation"</span>,
      <span class="hljs-string">"terminology_id"</span>: {
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"openehr"</span>
      },
      <span class="hljs-string">"code_string"</span>: <span class="hljs-string">"249"</span>
    },
    <span class="hljs-string">"description"</span>: <span class="hljs-string">"optional description"</span>
  },
  <span class="hljs-string">"attestations"</span>: [
    {
      <span class="hljs-string">"system_id"</span>: <span class="hljs-string">"String"</span>,
      <span class="hljs-string">"time_committed"</span>: <span class="hljs-string">"DV_DATE_TIME"</span>,
      <span class="hljs-string">"description"</span>: <span class="hljs-string">"String"</span>                  <span class="hljs-comment">/* optional */</span>
      <span class="hljs-string">"reason"</span>: <span class="hljs-string">"DV_TEXT"</span>,
      <span class="hljs-string">"proof"</span>: <span class="hljs-string">"String"</span>,                       <span class="hljs-comment">/* optional */</span>
      <span class="hljs-string">"is_pending"</span>: <span class="hljs-string">"Boolean"</span>
    },
    {...},
    {...}
  ]
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>400 Bad Request</code> is returned when the request is invalid such as an invalid <code>ehrId</code> or <code>versionUid</code> format.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>401 Unauthorized</code> is returned when request is not authorised.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>404 Not Found</code> is returned when an <code>EHR</code> with <code>ehrId</code> does not exist or <code>EHR_STATUS</code> with <code>versionUid</code> does not exist.</p>
</div></div></div></div></div></section><section id="ehr_access" class="resource-group"><h2 class="group-heading">EHR_ACCESS <a href="#ehr_access" class="permalink">&para;</a></h2><div id="ehr_access-ehr_access" class="resource"><h3 class="resource-heading">EHR_ACCESS <a href="#ehr_access-ehr_access" class="permalink">&nbsp;&para;</a></h3><div id="ehr_access-ehr_access-get" class="action get"><h4 class="action-heading"><div class="name">Get EHR_ACCESS by versionUid</div><a href="#ehr_access-ehr_access-get" class="method get">GET</a><code class="uri">/ehr/{ehrId}/ehr_access/{versionUid}</code></h4><h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/ehr_access/<span class="hljs-attribute" title="versionUid">versionUid</span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR identifier</p>
</dd><dt>versionUid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>version unique identifier</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>200 OK</code> is returned when the EHR_ACCESS is successfully retrieved.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
  "<span class="hljs-attribute">settings</span>": <span class="hljs-value">{}
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>401 Unauthorized</code> is returned when request is not authorised.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>404 Not Found</code> is returned when an <code>EHR</code> with <code>ehrId</code> does not exist
or an <code>EHR_STATUS</code> with <code>versionUid</code> does not exist.</p>
</div></div></div></div><div id="ehr_access-ehr_access-get-1" class="action get"><h4 class="action-heading"><div class="name">Get EHR_ACCESS</div><a href="#ehr_access-ehr_access-get-1" class="method get">GET</a><code class="uri">/ehr/{ehrId}/ehr_access{?versionSelector}</code></h4><h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/ehr_access?<span class="hljs-attribute">versionSelector=</span><span class="hljs-literal"></span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd><dt>versionSelector</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>version time specifier</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/ehr_access/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
  "<span class="hljs-attribute">settings</span>": <span class="hljs-value">{}
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id.</p>
</div></div></div></div><div id="ehr_access-ehr_access-put" class="action put"><h4 class="action-heading"><div class="name">Update an EHR_ACCESS</div><a href="#ehr_access-ehr_access-put" class="method put">PUT</a><code class="uri">/ehr/{ehrId}/ehr_access</code></h4><h4>Example URI</h4><div class="definition"><span class="method put">PUT</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/ehr_access</span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Match-If</span>: <span class="hljs-string">{precedingVersionUid}</span><br><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation/minimal}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">settings</span>": <span class="hljs-value">{}
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Returned when <code>Prefer</code> header is set to <code>return=representation</code>.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/ehr_status/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
  "<span class="hljs-attribute">settings</span>": <span class="hljs-value">{}
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>204</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Returned when <code>Prefer</code> header is NOT set to <code>return=representation</code>.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/ehr_access/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>412</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>Match-If</code> header doesn’t match the last version. Returns
last version in the <code>Content-Location</code> and <code>ETag</code> headers.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/ehr_access/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div></div></div></div></div><div id="ehr_access-versioned_ehr_access" class="resource"><h3 class="resource-heading">VERSIONED_EHR_ACCESS <a href="#ehr_access-versioned_ehr_access" class="permalink">&nbsp;&para;</a></h3><div id="ehr_access-versioned_ehr_access-get" class="action get"><h4 class="action-heading"><div class="name">Get a VERSIONED_EHR_ACCESS</div><a href="#ehr_access-versioned_ehr_access-get" class="method get">GET</a><code class="uri">/ehr/{ehrId}/versioned_ehr_access</code></h4><h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/versioned_ehr_access</span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "uid": "xxx",
    "owner_id": "{ehrId}",
    "time_created": "ISO8601 timestamp",
    "version_count: 12,
    "all_version_ids": [
        "versioned_uid1",
        "versioned_uid2",
        ...
    ]
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id.</p>
</div></div></div></div><div id="ehr_access-versioned_ehr_access-get-1" class="action get"><h4 class="action-heading"><div class="name">Get an EHR_ACCESS version by versionUid</div><a href="#ehr_access-versioned_ehr_access-get-1" class="method get">GET</a><code class="uri">/ehr/{ehrId}/versioned_ehr_access/versions/{versionUid}</code></h4><h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/versioned_ehr_access/versions/<span class="hljs-attribute" title="versionUid">versionUid</span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd><dt>versionUid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>version UID</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">contribution</span>": <span class="hljs-value">{}</span>,
    "<span class="hljs-attribute">signature</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">commit_audit</span>": <span class="hljs-value">{}</span>,
    "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">data</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">settings</span>": <span class="hljs-value">{}</span>,
    }
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id.</p>
</div></div></div></div><div id="ehr_access-versioned_ehr_access-get-2" class="action get"><h4 class="action-heading"><div class="name">Get an EHR_ACCESS version</div><a href="#ehr_access-versioned_ehr_access-get-2" class="method get">GET</a><code class="uri">/ehr/{ehrId}/versioned_ehr_access/version{?versionSelector}</code></h4><h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/versioned_ehr_access/version?<span class="hljs-attribute">versionSelector=</span><span class="hljs-literal"></span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd><dt>versionSelector</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>version time specifier</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">contribution</span>": <span class="hljs-value">{}</span>,
    "<span class="hljs-attribute">signature</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">commit_audit</span>": <span class="hljs-value">{}</span>,
    "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">data</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">settings</span>": <span class="hljs-value">{}</span>,
    }
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>204</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No VERSION at versionSelector.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id.</p>
</div></div></div></div><div id="ehr_access-versioned_ehr_access-post" class="action post"><h4 class="action-heading"><div class="name">Create a new EHR_ACCESS version</div><a href="#ehr_access-versioned_ehr_access-post" class="method post">POST</a><code class="uri">/ehr/{ehrId}/versioned_ehr_access/version</code></h4><h4>Example URI</h4><div class="definition"><span class="method post">POST</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/versioned_ehr_access/version</span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><ul>
<li>
<p>Body (application/json)</p>
<pre><code>{
      "<span class="hljs-attribute">commit_audit</span>": <span class="hljs-value">{}</span>,
      "<span class="hljs-attribute">data</span>": <span class="hljs-value">{
          "<span class="hljs-attribute">settings</span>": <span class="hljs-value">{}</span>,
      }
  </span>}</code></pre>
</li>
</ul>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Match-If</span>: <span class="hljs-string">{precedingVersionUid}</span><br><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation/minimal}</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>New EHR_ACCESS version was created. Content body is only returned when
<code>Prefer</code> header was set to <code>return=representation</code> otherwise only headers are
returned.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">/ehr/{ehrId}/versioned_ehr_access/versions/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
  "<span class="hljs-attribute">contribution</span>": <span class="hljs-value">{}</span>,
  "<span class="hljs-attribute">signature</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
  "<span class="hljs-attribute">commit_audit</span>": <span class="hljs-value">{}</span>,
  "<span class="hljs-attribute">data</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">subject</span>": <span class="hljs-value">{}</span>,
    "<span class="hljs-attribute">is_modifiable</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">is_queryable</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">other_details</span>": <span class="hljs-value">{}
  </span>}
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with given id.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>412</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>Match-If</code> header doesn’t match the last version. Returns
last version in the <code>Content-Location</code> and <code>ETag</code> headers.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/versioned_ehr_access/versions/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div></div></div></div></div></section><section id="directory" class="resource-group"><h2 class="group-heading">DIRECTORY <a href="#directory" class="permalink">&para;</a></h2><div id="directory-directory" class="resource"><h3 class="resource-heading">Directory <a href="#directory-directory" class="permalink">&nbsp;&para;</a></h3><div id="directory-directory-post" class="action post"><h4 class="action-heading"><div class="name">Create a directory</div><a href="#directory-directory-post" class="method post">POST</a><code class="uri">/ehr/{ehrId}/directory</code></h4><h4>Example URI</h4><div class="definition"><span class="method post">POST</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/directory</span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><ul>
<li>
<p>Body (application/json)</p>
<pre><code>{
      "<span class="hljs-attribute">items</span>": <span class="hljs-value">[...]</span>,
      "<span class="hljs-attribute">folders</span>": <span class="hljs-value">[{}]
  </span>}</code></pre>
</li>
</ul>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation/minimal}</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>New directory was created. Content body is only returned when
<code>Prefer</code> header has <code>return=representation</code> otherwise only headers are
returned.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">/ehr/{ehrId}/directory/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">items</span>": <span class="hljs-value">[...]</span>,
    "<span class="hljs-attribute">folders</span>": <span class="hljs-value">[{}]
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Bad request - error creating a directory.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id.</p>
</div></div></div></div><div id="directory-directory-put" class="action put"><h4 class="action-heading"><div class="name">Update a directory</div><a href="#directory-directory-put" class="method put">PUT</a><code class="uri">/ehr/{ehrId}/directory</code></h4><h4>Example URI</h4><div class="definition"><span class="method put">PUT</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/directory</span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><ul>
<li>
<p>Body (application/json)</p>
<pre><code>{
      "<span class="hljs-attribute">items</span>": <span class="hljs-value">[...]</span>,
      "<span class="hljs-attribute">folders</span>": <span class="hljs-value">[{}]
  </span>}</code></pre>
</li>
</ul>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Match-If</span>: <span class="hljs-string">{precedingVersionUid}</span><br><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation/minimal}</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Directory was updated.
Returned when <code>Prefer</code> header is set to <code>return=representation</code>.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">/ehr/{ehrId}/directory/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">items</span>": <span class="hljs-value">[...]</span>,
    "<span class="hljs-attribute">folders</span>": <span class="hljs-value">[{}]
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>204</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Directory was updated.
Returned when <code>Prefer</code> header is NOT set to <code>return=representation</code>.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Location</span>: <span class="hljs-string">/ehr/{ehrId}/directory/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Bad request - error when updating a directory.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>412</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>Match-If</code> header doesn’t match the last version. Returns
last version in the <code>Content-Location</code> and <code>ETag</code> headers.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/directory/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div></div></div></div><div id="directory-directory-delete" class="action delete"><h4 class="action-heading"><div class="name">Delete a directory</div><a href="#directory-directory-delete" class="method delete">DELETE</a><code class="uri">/ehr/{ehrId}/directory</code></h4><h4>Example URI</h4><div class="definition"><span class="method delete">DELETE</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/directory</span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Match-If</span>: <span class="hljs-string">{precedingVersionUid}</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>204</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Directory was deleted.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Bad request - error deleting directory.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>412</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>Match-If</code> header doesn’t match the last version. Returns
last version in the <code>Content-Location</code> and <code>ETag</code> headers.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/directory/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div></div></div></div><div id="directory-directory-get" class="action get"><h4 class="action-heading"><div class="name">Get a directory or its sub-folder by versionUid</div><a href="#directory-directory-get" class="method get">GET</a><code class="uri">/ehr/{ehrId}/directory/{versionUid}{?path}</code></h4><h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/directory/<span class="hljs-attribute" title="versionUid">versionUid</span>?<span class="hljs-attribute">path=</span><span class="hljs-literal"></span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd><dt>versionUid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>version UID</p>
</dd><dt>path</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>path to a sub-folder</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">items</span>": <span class="hljs-value">[...]</span>,
    "<span class="hljs-attribute">folders</span>": <span class="hljs-value">[{}]
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>204</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No sub-folder at provided path.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id or no directory with specified versionUid.</p>
</div></div></div></div><div id="directory-directory-get-1" class="action get"><h4 class="action-heading"><div class="name">Get a directory or its sub-folder</div><a href="#directory-directory-get-1" class="method get">GET</a><code class="uri">/ehr/{ehrId}/directory{?versionSelector,path}</code></h4><h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/directory?<span class="hljs-attribute">versionSelector=</span><span class="hljs-literal"></span>&<span class="hljs-attribute">path=</span><span class="hljs-literal"></span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd><dt>versionSelector</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>version time specifier</p>
</dd><dt>path</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>path to a sub-folder</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">/ehr/{ehrId}/directory/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">items</span>": <span class="hljs-value">[...]</span>,
    "<span class="hljs-attribute">folders</span>": <span class="hljs-value">[{}]
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>204</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>EHR has no directory at versionSelector or no sub-folder at provided path.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id.</p>
</div></div></div></div></div></section><section id="composition" class="resource-group"><h2 class="group-heading">COMPOSITION <a href="#composition" class="permalink">&para;</a></h2><div id="composition-composition" class="resource"><h3 class="resource-heading">Composition <a href="#composition-composition" class="permalink">&nbsp;&para;</a></h3><div id="composition-composition-get" class="action get"><h4 class="action-heading"><div class="name">Get a composition by version uid</div><a href="#composition-composition-get" class="method get">GET</a><code class="uri">/ehr/{ehrId}/compositions/{versionUid}{?format}</code></h4><p>// PP: IMO this should redirect to GET /compositions/versionUid, or just use that one and remove this one.</p>
<h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/compositions/<span class="hljs-attribute" title="versionUid">versionUid</span>?<span class="hljs-attribute">format=</span><span class="hljs-literal"></span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id.</p>
</dd><dt>versionUid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>version UID</p>
</dd><dt>format</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>format of the composition (when ommitted canonical openEHR is assumed)</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"COMPOSITION"</span>,
    <span class="hljs-string">"name"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"DV_TEXT"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Vital Signs"</span>
    },
    ...
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR or no composition with the version uid.</p>
</div></div></div></div><div id="composition-composition-get-1" class="action get"><h4 class="action-heading"><div class="name">Get a composition</div><a href="#composition-composition-get-1" class="method get">GET</a><code class="uri">/ehr/{ehrId}/compositions/{object_id}{?versionSelector,format}</code></h4><p>// PP: IMO this should redirect to GET /compositions/objectId, or just use that one and remove this one.</p>
<h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/compositions/<span class="hljs-attribute" title="object_id">object_id</span>?<span class="hljs-attribute">versionSelector=</span><span class="hljs-literal"></span>&<span class="hljs-attribute">format=</span><span class="hljs-literal"></span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd><dt>object_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>VERSIONED COMPOSITION’s uid</p>
</dd><dt>versionSelector</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>version time specifier</p>
</dd><dt>format</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>format of the composition (when ommitted canonical openEHR is assumed)</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/compositions/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"COMPOSITION"</span>,
    <span class="hljs-string">"name"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"DV_TEXT"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Vital Signs"</span>
    },
    ...
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>204</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No composition at specified versionSelector.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR or no composition with the given object id.</p>
</div></div></div></div><div id="composition-composition-post" class="action post"><h4 class="action-heading"><div class="name">Create a new composition</div><a href="#composition-composition-post" class="method post">POST</a><code class="uri">/ehr/{ehrId}/compositions{?format}</code></h4><p>// PP: why not POST /compositions with ehrId as param? we can keep all the COMPOSITION endpoints under /compositions instead of using both /ehr/ehrId/compositions and /compositions, IMO is simpler to implement with one set of URLs for a resource. Maybe someone have a good argument for keeping both endpoints.</p>
<h4>Example URI</h4><div class="definition"><span class="method post">POST</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/compositions?<span class="hljs-attribute">format=</span><span class="hljs-literal"></span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd><dt>format</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>format of the composition (when omitted canonical openEHR is assumed)</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><ul>
<li>
<p>Body (application/json)</p>
<pre><code><span class="hljs-collection">{
      <span class="hljs-string">"_type"</span>: <span class="hljs-string">"COMPOSITION"</span>,
      <span class="hljs-string">"name"</span>: <span class="hljs-collection">{
          <span class="hljs-string">"_type"</span>: <span class="hljs-string">"DV_TEXT"</span>,
          <span class="hljs-string">"value"</span>: <span class="hljs-string">"Vital Signs"</span>
      }</span>,
      ...
  }</span></code></pre>
</li>
</ul>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation/minimal}</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>New composition was created. Content body is only returned when
<code>Prefer</code> header has <code>return=representation</code> otherwise only headers are
returned.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Location</span>: <span class="hljs-string">/ehr/{ehrId}/compositions/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"COMPOSITION"</span>,
    <span class="hljs-string">"name"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"DV_TEXT"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Vital Signs"</span>
    },
    ...
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Bad request: composition validation errors.</p>
</div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">message</span>": <span class="hljs-value"><span class="hljs-string">"Error message"</span></span>,
  "<span class="hljs-attribute">validationErrors</span>": <span class="hljs-value">[
    <span class="hljs-string">"error1"</span>,
    <span class="hljs-string">"error2"</span>
  ]
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id.</p>
</div></div></div></div><div id="composition-composition-put" class="action put"><h4 class="action-heading"><div class="name">Update or create a composition</div><a href="#composition-composition-put" class="method put">PUT</a><code class="uri">/ehr/{ehrId}/compositions/{object_id}{?format}</code></h4><p>This call can be used to update an existing composition (identified by {objectId}) or
to create a new one with the supplied {objectId} instead of a server assigned one.
In case of an update <code>Match-If</code> header <em>might</em> be required.</p>
<h4>Example URI</h4><div class="definition"><span class="method put">PUT</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/compositions/<span class="hljs-attribute" title="object_id">object_id</span>?<span class="hljs-attribute">format=</span><span class="hljs-literal"></span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd><dt>object_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>object id of the composition to update or create with this id</p>
</dd><dt>format</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>optional format of the composition (when ommitted canonical openEHR is assumed)</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><ul>
<li>
<p>Body (application/json)</p>
<pre><code><span class="hljs-collection">{
      <span class="hljs-string">"_type"</span>: <span class="hljs-string">"COMPOSITION"</span>,
      <span class="hljs-string">"name"</span>: <span class="hljs-collection">{
          <span class="hljs-string">"_type"</span>: <span class="hljs-string">"DV_TEXT"</span>,
          <span class="hljs-string">"value"</span>: <span class="hljs-string">"Vital Signs"</span>
      }</span>,
      ...
  }</span></code></pre>
</li>
</ul>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Match-If</span>: <span class="hljs-string">{precedingVersionUid}</span><br><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation/minimal}</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Returned when <code>Prefer</code> header is set to <code>return=representation</code>.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/compositions/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"COMPOSITION"</span>,
    <span class="hljs-string">"name"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"DV_TEXT"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Vital Signs"</span>
    },
    ...
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>204</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Returned when <code>Prefer</code> header is NOT set to <code>return=representation</code>.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/compositions/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Bad request: composition validation errors.</p>
</div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">message</span>": <span class="hljs-value"><span class="hljs-string">"Error message"</span></span>,
  "<span class="hljs-attribute">validationErrors</span>": <span class="hljs-value">[
    <span class="hljs-string">"error1"</span>,
    <span class="hljs-string">"error2"</span>
  ]
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id or no composition with the given object id.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>412</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>Match-If</code> header doesn’t match the last version. Returns
last version in the <code>Content-Location</code> and <code>ETag</code> headers.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/ehr_status/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div></div></div></div><div id="composition-composition-delete" class="action delete"><h4 class="action-heading"><div class="name">Delete a composition</div><a href="#composition-composition-delete" class="method delete">DELETE</a><code class="uri">/ehr/{ehrId}/compositions/{object_id}</code></h4><h4>Example URI</h4><div class="definition"><span class="method delete">DELETE</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/compositions/<span class="hljs-attribute" title="object_id">object_id</span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd><dt>object_id</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>object id of the composition to delete</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Match-If</span>: <span class="hljs-string">{precedingVersionUid}</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>204</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Composition was deleted.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/compositions/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Bad request.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id or no composition with the given object id.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>412</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>Match-If</code> header doesn’t match the last version. Returns
last version in the <code>Content-Location</code> and <code>ETag</code> headers.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/compositions/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div></div></div></div><div id="composition-composition-put-1" class="action put"><h4 class="action-heading"><div class="name">Update a composition directly</div><a href="#composition-composition-put-1" class="method put">PUT</a><code class="uri">/compositions/{objectId}{?format}</code></h4><h4>Example URI</h4><div class="definition"><span class="method put">PUT</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/compositions/<span class="hljs-attribute" title="objectId">objectId</span>?<span class="hljs-attribute">format=</span><span class="hljs-literal"></span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>objectId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>object id of the composition to update</p>
</dd><dt>format</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>optional format of the composition (when omitted canonical openEHR is assumed)</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><ul>
<li>
<p>Body (application/json)</p>
<pre><code><span class="hljs-collection">{
      <span class="hljs-string">"_type"</span>: <span class="hljs-string">"COMPOSITION"</span>,
      <span class="hljs-string">"name"</span>: <span class="hljs-collection">{
          <span class="hljs-string">"_type"</span>: <span class="hljs-string">"DV_TEXT"</span>,
          <span class="hljs-string">"value"</span>: <span class="hljs-string">"Vital Signs"</span>
      }</span>,
      ...
  }</span></code></pre>
</li>
</ul>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Match-If</span>: <span class="hljs-string">{precedingVersionUid}</span><br><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation/minimal}</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Returned when <code>Prefer</code> header is set to <code>return=representation</code>.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/compositions/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"COMPOSITION"</span>,
    <span class="hljs-string">"name"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"DV_TEXT"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Vital Signs"</span>
    },
    ...
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>204</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Returned when <code>Prefer</code> header is NOT set to <code>return=representation</code>.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/compositions/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Bad request: composition validation errors.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">message</span>": <span class="hljs-value"><span class="hljs-string">"Error message"</span></span>,
  "<span class="hljs-attribute">validationErrors</span>": <span class="hljs-value">[
    <span class="hljs-string">"error1"</span>,
    <span class="hljs-string">"error2"</span>
  ]
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id or no composition with the given object id.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>412</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>Match-If</code> header doesn’t match the last version. Returns
last version in the <code>Content-Location</code> and <code>ETag</code> headers.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/ehr_status/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div></div></div></div><div id="composition-composition-delete-1" class="action delete"><h4 class="action-heading"><div class="name">Delete a composition directly</div><a href="#composition-composition-delete-1" class="method delete">DELETE</a><code class="uri">/compositions/{objectId}</code></h4><h4>Example URI</h4><div class="definition"><span class="method delete">DELETE</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/compositions/<span class="hljs-attribute" title="objectId">objectId</span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>objectId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>object id of the composition to delete</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Match-If</span>: <span class="hljs-string">{precedingVersionUid}</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>204</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Composition was deleted.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/compositions/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Bad request.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id or no composition with the given object id.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>412</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>Match-If</code> header doesn’t match the last version. Returns
last version in the <code>Content-Location</code> and <code>ETag</code> headers.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/compositions/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div></div></div></div><div id="composition-composition-get-2" class="action get"><h4 class="action-heading"><div class="name">Get a composition by version uid directly</div><a href="#composition-composition-get-2" class="method get">GET</a><code class="uri">/compositions/{versionUid}{?format}</code></h4><h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/compositions/<span class="hljs-attribute" title="versionUid">versionUid</span>?<span class="hljs-attribute">format=</span><span class="hljs-literal"></span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>versionUid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>version uid</p>
</dd><dt>format</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>format of the composition (when omitted canonical openEHR is assumed)</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"COMPOSITION"</span>,
    <span class="hljs-string">"name"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"DV_TEXT"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Vital Signs"</span>
    },
    ...
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No composition with the version uid.</p>
</div></div></div></div><div id="composition-composition-get-3" class="action get"><h4 class="action-heading"><div class="name">Get a composition directly</div><a href="#composition-composition-get-3" class="method get">GET</a><code class="uri">/compositions/{objectId}{?versionSelector,format}</code></h4><h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/compositions/<span class="hljs-attribute" title="objectId">objectId</span>?<span class="hljs-attribute">versionSelector=</span><span class="hljs-literal"></span>&<span class="hljs-attribute">format=</span><span class="hljs-literal"></span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>objectId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>VERSIONED_COMPOSITION’s uid</p>
</dd><dt>versionSelector</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>version time specifier</p>
</dd><dt>format</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>format of the composition (when omitted canonical openEHR is assumed)</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/compositions/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"_type"</span>: <span class="hljs-string">"COMPOSITION"</span>,
    <span class="hljs-string">"name"</span>: {
        <span class="hljs-string">"_type"</span>: <span class="hljs-string">"DV_TEXT"</span>,
        <span class="hljs-string">"value"</span>: <span class="hljs-string">"Vital Signs"</span>
    },
    ...
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>204</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No composition at specified versionSelector.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No composition with the given object id.</p>
</div></div></div></div></div><div id="composition-versioned-composition" class="resource"><h3 class="resource-heading">Versioned Composition <a href="#composition-versioned-composition" class="permalink">&nbsp;&para;</a></h3><div id="composition-versioned-composition-post" class="action post"><h4 class="action-heading"><div class="name">Create a new versioned composition</div><a href="#composition-versioned-composition-post" class="method post">POST</a><code class="uri">/ehr/{ehrId}/versioned_compositions</code></h4><h4>Example URI</h4><div class="definition"><span class="method post">POST</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/versioned_compositions</span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation/minimal}</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>New versioned composition was created. Content body is only returned when
<code>Prefer</code> header has <code>return=representation</code> otherwise only headers are
returned.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">/ehr/{ehrId}/versioned_compositions/{uid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"xxx"</span></span>,
  "<span class="hljs-attribute">owner_id</span>": <span class="hljs-value"><span class="hljs-string">"{ehrId}"</span></span>,
  "<span class="hljs-attribute">time_created</span>": <span class="hljs-value"><span class="hljs-string">"ISO8601 timestamp"</span>
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Bad request - when VERSIONED_COMPOSITION with the given uid already exists.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id.</p>
</div></div></div></div><div id="composition-versioned-composition-put" class="action put"><h4 class="action-heading"><div class="name">Create a new versioned composition with supplied uid</div><a href="#composition-versioned-composition-put" class="method put">PUT</a><code class="uri">/ehr/{ehrId}/versioned_compositions/{uid}</code></h4><h4>Example URI</h4><div class="definition"><span class="method put">PUT</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/versioned_compositions/<span class="hljs-attribute" title="uid">uid</span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd><dt>uid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>VERSIONED_COMPOSITION uid</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation/minimal}</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>New versioned composition was created. Content body is only returned when
<code>Prefer</code> header has <code>return=representation</code> otherwise only headers are
returned.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">/ehr/{ehrId}/versioned_compositions/{uid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"xxx"</span></span>,
  "<span class="hljs-attribute">owner_id</span>": <span class="hljs-value"><span class="hljs-string">"{ehrId}"</span></span>,
  "<span class="hljs-attribute">time_created</span>": <span class="hljs-value"><span class="hljs-string">"ISO8601 timestamp"</span>
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Bad request - when VERSIONED_COMPOSITION with the given uid already exists.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id.</p>
</div></div></div></div><div id="composition-versioned-composition-get" class="action get"><h4 class="action-heading"><div class="name">Get a versioned composition</div><a href="#composition-versioned-composition-get" class="method get">GET</a><code class="uri">/ehr/{ehrId}/versioned_compositions/{uid}</code></h4><p>Gets a complete VERSIONED_COMPOSITION.</p>
<h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/versioned_compositions/<span class="hljs-attribute" title="uid">uid</span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd><dt>uid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>VERSIONED_COMPOSITION’s uid</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">/ehr/{ehrId}/versioned_compositions/{uid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "uid": "xxx",
    "owner_id": "{ehrId}",
    "time_created": "ISO8601 timestamp",
    "version_count: 12,
    "all_version_ids": [
        "versioned_uid1",
        "versioned_uid2",
        ...
    ]
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Bad request - when VERSIONED_COMPOSITION with the given uid already exists.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id.</p>
</div></div></div></div><div id="composition-versioned-composition-post-1" class="action post"><h4 class="action-heading"><div class="name">Create a new composition version</div><a href="#composition-versioned-composition-post-1" class="method post">POST</a><code class="uri">/ehr/{ehrId}/versioned_compositions/{uid}/version{?format}</code></h4><h4>Example URI</h4><div class="definition"><span class="method post">POST</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/versioned_compositions/<span class="hljs-attribute" title="uid">uid</span>/version?<span class="hljs-attribute">format=</span><span class="hljs-literal"></span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd><dt>uid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>VERSIONED_COMPOSITION’s uid</p>
</dd><dt>format</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>optional format of the composition (when omitted canonical openEHR
is assumed)</p>
</dd></dl></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><ul>
<li>
<p>Body (application/json)</p>
<pre><code>{
      "<span class="hljs-attribute">commit_audit</span>": <span class="hljs-value">{}</span>,
      "<span class="hljs-attribute">data</span>": <span class="hljs-value">{
          "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"COMPOSITION"</span></span>,
          "<span class="hljs-attribute">name</span>": <span class="hljs-value">{
              "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"DV_TEXT"</span></span>,
              "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"Vital Signs"</span>
          </span>}
          ...
      </span>}
  </span>}</code></pre>
</li>
</ul>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Match-If</span>: <span class="hljs-string">{precedingVersionUid}</span><br><span class="hljs-attribute">Prefer</span>: <span class="hljs-string">return={representation/minimal}</span></code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>201</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>New composition version was created. Content body is only returned when
<code>Prefer</code> header was set to <code>return=representation</code> otherwise only headers are
returned.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">/ehr/{ehrId}/versioned_compositions/{uid}/versions/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">contribution</span>": <span class="hljs-value">{}</span>,
    "<span class="hljs-attribute">signature</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">commit_audit</span>": <span class="hljs-value">{}</span>,
    "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">data</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"COMPOSITION"</span></span>,
        "<span class="hljs-attribute">name</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"DV_TEXT"</span></span>,
            "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"Vital Signs"</span>
        </span>}
        ...
    </span>}
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>400</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Bad request: composition validation errors.</p>
</div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">message</span>": <span class="hljs-value"><span class="hljs-string">"Error message"</span></span>,
  "<span class="hljs-attribute">validationErrors</span>": <span class="hljs-value">[
    <span class="hljs-string">"error1"</span>,
    <span class="hljs-string">"error2"</span>
  ]
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id or no VERSIONED_COMPOSITION with uid.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>412</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p><code>Match-If</code> header doesn’t match the last version. Returns
last version in the <code>Content-Location</code> and <code>ETag</code> headers.</p>
</div><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Location</span>: <span class="hljs-string">/ehr/{ehrId}/versioned_compositions/{uid}/versions/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div></div></div></div><div id="composition-versioned-composition-get-1" class="action get"><h4 class="action-heading"><div class="name">Get a composition version by versionUid</div><a href="#composition-versioned-composition-get-1" class="method get">GET</a><code class="uri">/ehr/{ehrId}/versioned_compositions/{uid}/version/{versionUid}{?format}</code></h4><h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/versioned_compositions/<span class="hljs-attribute" title="uid">uid</span>/version/<span class="hljs-attribute" title="versionUid">versionUid</span>?<span class="hljs-attribute">format=</span><span class="hljs-literal"></span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd><dt>uid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>VERSIONED_COMPOSITION’s uid</p>
</dd><dt>versionUid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>version uid</p>
</dd><dt>format</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>optional format of the composition (when ommitted canonical openEHR
is assumed)</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">contribution</span>": <span class="hljs-value">{}</span>,
    "<span class="hljs-attribute">signature</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">commit_audit</span>": <span class="hljs-value">{}</span>,
    "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">data</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"COMPOSITION"</span></span>,
        "<span class="hljs-attribute">name</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"DV_TEXT"</span></span>,
            "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"Vital Signs"</span>
        </span>}
        ...
    </span>}
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id, no VERSIONED_COMPOSITION with uid or no version with versionUid.</p>
</div></div></div></div><div id="composition-versioned-composition-get-2" class="action get"><h4 class="action-heading"><div class="name">Get a composition version</div><a href="#composition-versioned-composition-get-2" class="method get">GET</a><code class="uri">/ehr/{ehrId}/versioned_compositions/{uid}/version{?versionSelector,format}</code></h4><h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/ehr/<span class="hljs-attribute" title="ehrId">ehrId</span>/versioned_compositions/<span class="hljs-attribute" title="uid">uid</span>/version?<span class="hljs-attribute">versionSelector=</span><span class="hljs-literal"></span>&<span class="hljs-attribute">format=</span><span class="hljs-literal"></span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>ehrId</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>EHR id</p>
</dd><dt>uid</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>VERSIONED_COMPOSITION’s uid</p>
</dd><dt>versionSelector</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>version time specifier</p>
</dd><dt>format</dt><dd><code>string</code>&nbsp;<span>(optional)</span>&nbsp;<p>optional format of the composition (when omitted canonical openEHR is assumed)</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span><br><span class="hljs-attribute">Location</span>: <span class="hljs-string">/ehr/{ehrId}/versioned_compositions/{uid}/versions/{versionUid}</span><br><span class="hljs-attribute">ETag</span>: <span class="hljs-string">{versionUid}</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    "<span class="hljs-attribute">contribution</span>": <span class="hljs-value">{}</span>,
    "<span class="hljs-attribute">signature</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">commit_audit</span>": <span class="hljs-value">{}</span>,
    "<span class="hljs-attribute">uid</span>": <span class="hljs-value"><span class="hljs-string">"..."</span></span>,
    "<span class="hljs-attribute">data</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"COMPOSITION"</span></span>,
        "<span class="hljs-attribute">name</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"DV_TEXT"</span></span>,
            "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"Vital Signs"</span>
        </span>}
        ...
    </span>}
</span>}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>401</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>Unauthorized.</p>
</div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>404</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><div class="description"><p>No EHR with the given id, no VERSIONED_COMPOSITION with uid or no version with versionUid.</p>
</div></div></div></div></div></section><section id="query" class="resource-group"><h2 class="group-heading">QUERY <a href="#query" class="permalink">&para;</a></h2><div id="query-querying" class="resource"><h3 class="resource-heading">Querying <a href="#query-querying" class="permalink">&nbsp;&para;</a></h3><div id="query-querying-get" class="action get"><h4 class="action-heading"><div class="name">Get AQL query results</div><a href="#query-querying-get" class="method get">GET</a><code class="uri">/query/?aql={aql}</code></h4><p>Execute an AQL query as given by the aql parameter.</p>
<pre><code class="language-sql"><span class="hljs-operator"><span class="hljs-keyword">select</span>
a_a/<span class="hljs-keyword">data</span>[at0002]/<span class="hljs-keyword">events</span>[at0003]/<span class="hljs-keyword">time</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">When</span>,
a_a/<span class="hljs-keyword">data</span>[at0002]/<span class="hljs-keyword">events</span>[at0003]/<span class="hljs-keyword">data</span>[at0001]/items[at0004]/<span class="hljs-keyword">value</span> <span class="hljs-keyword">as</span> Temperature
<span class="hljs-keyword">from</span> EHR <span class="hljs-keyword">e</span> contains COMPOSITION a CONTAINS OBSERVATION a_a[openEHR-EHR-OBSERVATION.body_temperature.v1]
<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> a_a/<span class="hljs-keyword">data</span>[at0002]/<span class="hljs-keyword">events</span>[at0003]/<span class="hljs-keyword">time</span> <span class="hljs-keyword">desc</span>
<span class="hljs-keyword">offset</span> <span class="hljs-number">0</span> <span class="hljs-keyword">limit</span> <span class="hljs-number">2</span>
</span></code></pre>
<h4>Example URI</h4><div class="definition"><span class="method get">GET</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/query/?aql=<span class="hljs-attribute" title="aql">aql</span></span></div><div class="title"><strong>URI Parameters</strong><div class="collapse-button show"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><dl class="inner"><dt>aql</dt><dd><code>string</code>&nbsp;<span class="required">(required)</span>&nbsp;<p>The aql to be executed</p>
</dd></dl></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
  "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"raw"</span></span>,
  "<span class="hljs-attribute">@schemaversion</span>": <span class="hljs-value"><span class="hljs-string">"0.1.0"</span></span>,
  "<span class="hljs-attribute">@created</span>": <span class="hljs-value"><span class="hljs-string">"2016-06-22T07:54:04.758+02:00"</span></span>,
  "<span class="hljs-attribute">@generator</span>": <span class="hljs-value"><span class="hljs-string">"&lt;The resultset generator&gt;"</span></span>,
  "<span class="hljs-attribute">totalResults</span>": <span class="hljs-value"><span class="hljs-number">2</span></span>,
  "<span class="hljs-attribute">columns</span>": <span class="hljs-value">[
    {
      "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"When"</span></span>,
      "<span class="hljs-attribute">path</span>": <span class="hljs-value"><span class="hljs-string">"/data[at0002]/events[at0003]/time"</span>
    </span>},
    {
      "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"Temperature"</span></span>,
      "<span class="hljs-attribute">path</span>": <span class="hljs-value"><span class="hljs-string">"/data[at0002]/events[at0003]/data[at0001]/items[at0004]/value"</span>
    </span>}
  ]</span>,
  "<span class="hljs-attribute">rows</span>": <span class="hljs-value">[
    [
      {
        "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"DV_DATE_TIME"</span></span>,
        "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"2016-06-08T11:02:47+02:00"</span>
      </span>},
      {
        "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"DV_QUANTITY"</span></span>,
        "<span class="hljs-attribute">magnitude</span>": <span class="hljs-value"><span class="hljs-number">38</span></span>,
        "<span class="hljs-attribute">units</span>": <span class="hljs-value"><span class="hljs-string">"?C"</span>
      </span>}
    ],
    [
      {
        "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"DV_DATE_TIME"</span></span>,
        "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"2016-06-05T08:53:36+02:00"</span>
      </span>},
      {
        "<span class="hljs-attribute">_type</span>": <span class="hljs-value"><span class="hljs-string">"DV_QUANTITY"</span></span>,
        "<span class="hljs-attribute">magnitude</span>": <span class="hljs-value"><span class="hljs-number">37</span></span>,
        "<span class="hljs-attribute">units</span>": <span class="hljs-value"><span class="hljs-string">"Cel"</span>
      </span>}
    ]
  ]
</span>}</code></pre><div style="height: 1px;"></div></div></div></div><div id="query-querying-post" class="action post"><h4 class="action-heading"><div class="name">Get query results</div><a href="#query-querying-post" class="method post">POST</a><code class="uri">/query/aql</code></h4><p>Execute an AQL query.</p>
<p>NOTE: we might add a header to indicate which EHR to execute against to
allow systems that need to route based of EHR id to do so without having
to analyze the request body.</p>
<h4>Example URI</h4><div class="definition"><span class="method post">POST</span>&nbsp;<span class="uri"><span class="hostname">http://www.openehr.org/api</span>/query/aql</span></div><div class="title"><strong>Request</strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Headers</h5><pre><code><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span></code></pre><div style="height: 1px;"></div><h5>Body</h5><pre><code>{
    <span class="hljs-string">"aql"</span>: <span class="hljs-string">"SELECT ...."</span>,
    <span class="hljs-string">"aqlParameters"</span>: {
        <span class="hljs-string">"parameter-name"</span>: <span class="hljs-string">"parameter-value"</span>,...
    },
    <span class="hljs-string">"offset"</span>: <span class="hljs-number">999</span>,
    <span class="hljs-string">"fetch"</span>: <span class="hljs-number">888</span>,
    <span class="hljs-comment">// possibly more, TBD</span>
}</code></pre><div style="height: 1px;"></div></div></div><div class="title"><strong>Response&nbsp;&nbsp;<code>200</code></strong><div class="collapse-button"><span class="close">Hide</span><span class="open">Show</span></div></div><div class="collapse-content"><div class="inner"><h5>Body</h5><pre><code>{
    <span class="hljs-string">"metaData"</span>: {
        <span class="hljs-string">"hits"</span>: <span class="hljs-number">199</span>,
        ...
    },
    <span class="hljs-string">"resultSet"</span>: [
        {
            <span class="hljs-string">"unit"</span>: <span class="hljs-string">"?C"</span>,
            <span class="hljs-string">"temperature"</span>: <span class="hljs-number">38.8</span>
        },
        {
            <span class="hljs-string">"unit"</span>: <span class="hljs-string">"?C"</span>,
            <span class="hljs-string">"temperature"</span>: <span class="hljs-number">38.8</span>
        },
        {
            <span class="hljs-string">"unit"</span>: <span class="hljs-string">"?C"</span>,
            <span class="hljs-string">"temperature"</span>: <span class="hljs-number">38.8</span>
        }
    ],
    <span class="hljs-string">"executedAql"</span>: <span class="hljs-string">"aql with replaced parameters"</span>,
}</code></pre><div style="height: 1px;"></div></div></div></div></div></section></div></div></div><p style="text-align: center;" class="text-muted">Generated by&nbsp;<a href="https://github.com/danielgtaylor/aglio" class="aglio">aglio</a>&nbsp;on 14 Aug 2017</p><script>/* eslint-env browser */
/* eslint quotes: [2, "single"] */
'use strict';

/*
  Determine if a string ends with another string.
*/
function endsWith(str, suffix) {
    return str.indexOf(suffix, str.length - suffix.length) !== -1;
}

/*
  Get a list of direct child elements by class name.
*/
function childrenByClass(element, name) {
  var filtered = [];

  for (var i = 0; i < element.children.length; i++) {
    var child = element.children[i];
    var classNames = child.className.split(' ');
    if (classNames.indexOf(name) !== -1) {
      filtered.push(child);
    }
  }

  return filtered;
}

/*
  Get an array [width, height] of the window.
*/
function getWindowDimensions() {
  var w = window,
      d = document,
      e = d.documentElement,
      g = d.body,
      x = w.innerWidth || e.clientWidth || g.clientWidth,
      y = w.innerHeight || e.clientHeight || g.clientHeight;

  return [x, y];
}

/*
  Collapse or show a request/response example.
*/
function toggleCollapseButton(event) {
    var button = event.target.parentNode;
    var content = button.parentNode.nextSibling;
    var inner = content.children[0];

    if (button.className.indexOf('collapse-button') === -1) {
      // Clicked without hitting the right element?
      return;
    }

    if (content.style.maxHeight && content.style.maxHeight !== '0px') {
        // Currently showing, so let's hide it
        button.className = 'collapse-button';
        content.style.maxHeight = '0px';
    } else {
        // Currently hidden, so let's show it
        button.className = 'collapse-button show';
        content.style.maxHeight = inner.offsetHeight + 12 + 'px';
    }
}

function toggleTabButton(event) {
    var i, index;
    var button = event.target;

    // Get index of the current button.
    var buttons = childrenByClass(button.parentNode, 'tab-button');
    for (i = 0; i < buttons.length; i++) {
        if (buttons[i] === button) {
            index = i;
            button.className = 'tab-button active';
        } else {
            buttons[i].className = 'tab-button';
        }
    }

    // Hide other tabs and show this one.
    var tabs = childrenByClass(button.parentNode.parentNode, 'tab');
    for (i = 0; i < tabs.length; i++) {
        if (i === index) {
            tabs[i].style.display = 'block';
        } else {
            tabs[i].style.display = 'none';
        }
    }
}

/*
  Collapse or show a navigation menu. It will not be hidden unless it
  is currently selected or `force` has been passed.
*/
function toggleCollapseNav(event, force) {
    var heading = event.target.parentNode;
    var content = heading.nextSibling;
    var inner = content.children[0];

    if (heading.className.indexOf('heading') === -1) {
      // Clicked without hitting the right element?
      return;
    }

    if (content.style.maxHeight && content.style.maxHeight !== '0px') {
      // Currently showing, so let's hide it, but only if this nav item
      // is already selected. This prevents newly selected items from
      // collapsing in an annoying fashion.
      if (force || window.location.hash && endsWith(event.target.href, window.location.hash)) {
        content.style.maxHeight = '0px';
      }
    } else {
      // Currently hidden, so let's show it
      content.style.maxHeight = inner.offsetHeight + 12 + 'px';
    }
}

/*
  Refresh the page after a live update from the server. This only
  works in live preview mode (using the `--server` parameter).
*/
function refresh(body) {
    document.querySelector('body').className = 'preload';
    document.body.innerHTML = body;

    // Re-initialize the page
    init();
    autoCollapse();

    document.querySelector('body').className = '';
}

/*
  Determine which navigation items should be auto-collapsed to show as many
  as possible on the screen, based on the current window height. This also
  collapses them.
*/
function autoCollapse() {
  var windowHeight = getWindowDimensions()[1];
  var itemsHeight = 64; /* Account for some padding */
  var itemsArray = Array.prototype.slice.call(
    document.querySelectorAll('nav .resource-group .heading'));

  // Get the total height of the navigation items
  itemsArray.forEach(function (item) {
    itemsHeight += item.parentNode.offsetHeight;
  });

  // Should we auto-collapse any nav items? Try to find the smallest item
  // that can be collapsed to show all items on the screen. If not possible,
  // then collapse the largest item and do it again. First, sort the items
  // by height from smallest to largest.
  var sortedItems = itemsArray.sort(function (a, b) {
    return a.parentNode.offsetHeight - b.parentNode.offsetHeight;
  });

  while (sortedItems.length && itemsHeight > windowHeight) {
    for (var i = 0; i < sortedItems.length; i++) {
      // Will collapsing this item help?
      var itemHeight = sortedItems[i].nextSibling.offsetHeight;
      if ((itemsHeight - itemHeight <= windowHeight) || i === sortedItems.length - 1) {
        // It will, so let's collapse it, remove its content height from
        // our total and then remove it from our list of candidates
        // that can be collapsed.
        itemsHeight -= itemHeight;
        toggleCollapseNav({target: sortedItems[i].children[0]}, true);
        sortedItems.splice(i, 1);
        break;
      }
    }
  }
}

/*
  Initialize the interactive functionality of the page.
*/
function init() {
    var i, j;

    // Make collapse buttons clickable
    var buttons = document.querySelectorAll('.collapse-button');
    for (i = 0; i < buttons.length; i++) {
        buttons[i].onclick = toggleCollapseButton;

        // Show by default? Then toggle now.
        if (buttons[i].className.indexOf('show') !== -1) {
            toggleCollapseButton({target: buttons[i].children[0]});
        }
    }

    var responseCodes = document.querySelectorAll('.example-names');
    for (i = 0; i < responseCodes.length; i++) {
        var tabButtons = childrenByClass(responseCodes[i], 'tab-button');
        for (j = 0; j < tabButtons.length; j++) {
            tabButtons[j].onclick = toggleTabButton;

            // Show by default?
            if (j === 0) {
                toggleTabButton({target: tabButtons[j]});
            }
        }
    }

    // Make nav items clickable to collapse/expand their content.
    var navItems = document.querySelectorAll('nav .resource-group .heading');
    for (i = 0; i < navItems.length; i++) {
        navItems[i].onclick = toggleCollapseNav;

        // Show all by default
        toggleCollapseNav({target: navItems[i].children[0]});
    }
}

// Initial call to set up buttons
init();

window.onload = function () {
    autoCollapse();
    // Remove the `preload` class to enable animations
    document.querySelector('body').className = '';
};
</script></body></html>